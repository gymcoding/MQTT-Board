(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"057c":function(e,t,s){},"0a8d":function(e,t,s){"use strict";var i=s("2d67"),r=s.n(i);r.a},1:function(e,t){},2:function(e,t){},"2d67":function(e,t,s){},"2f0a":function(e,t,s){},3:function(e,t){},"3b81":function(e,t,s){"use strict";var i=s("057c"),r=s.n(i);r.a},4:function(e,t){},"4b39":function(e,t,s){"use strict";var i=s("d159"),r=s.n(i);r.a},"57fe":function(e,t,s){"use strict";var i=s("2f0a"),r=s.n(i);r.a},"5e04":function(e,t,s){},"744b":function(e,t,s){"use strict";var i=s("c276"),r=s.n(i);r.a},"82c0":function(e,t,s){},"8b24":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("mqtt-client",{attrs:{useLocalStorage:e.needUseLS,initSettings:e.initSettings,needInitNewClient:e.needInitNewClient}})],1)},r=[],n=function(){var e,t,s,i,r=this,n=r.$createElement,o=r._self._c||n;return o("div",{staticClass:"absolute-full"},[o("q-layout",{attrs:{view:"hhh LpR lff",container:""}},[o("q-header",{attrs:{reveal:""}},[o("q-toolbar",{class:(e={},e["bg-"+r.color]=!0,e["text-white"]=!!r.color,e),staticStyle:{position:"absolute","z-index":"1"}},[r.activeClient?o("q-btn",{attrs:{round:"",flat:"",dense:"",icon:"mdi-close"},on:{click:r.clearActiveClient}}):r._e(),o("q-toolbar-title",[r.activeClient||""!==r.whiteLabel?r._e():o("img",{staticStyle:{height:"30px"},attrs:{src:"statics/mqttboard.png",alt:"MQTT Board"}}),r.activeClient?o("span",[r._v("\n             "+r._s(""+(r.activeClient.config.clientName||r.activeClient.config.clientId))+"\n             "),r.activeClient.config.clientName?o("q-tooltip",[r._v(r._s(""+r.activeClient.config.clientId))]):r._e()],1):o("span",[r._v("\n             "+r._s(r.whiteLabel||"MQTT Board")+"\n           ")]),r.activeClient&&r.$q.platform.is.desktop?o("sup",{staticClass:"absolute",class:["bg-"+(r.activeClient.status?"green":"red")],staticStyle:{"border-radius":"5px","font-size":".6rem",padding:"2px","min-width":"15px",top:"5px"}},[r._v(r._s(r.activeClient.status?"online":"offline"))]):r._e(),r.activeClient&&r.$q.platform.is.desktop&&r.activeClient.cid?o("sub",{staticStyle:{"border-radius":"5px","font-size":".7rem",padding:"2px"},attrs:{title:"cid"}},[r._v(r._s(r.activeClient.cid))]):r._e(),r.activeClient||""!==r.whiteLabel?r._e():o("sup",{staticStyle:{position:"relative","font-size":".9rem","padding-left":"4px"}},[r._v(r._s(r.version))])]),r.activeClient?o("q-btn",{attrs:{round:"",flat:"",dark:"",icon:"mdi-settings"},on:{click:function(e){return e.stopPropagation(),r.editClientHandler(r.activeClient.id)}}}):r._e(),r.activeClient?o("q-btn",{attrs:{round:"",flat:"",icon:"mdi-plus"}},[o("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[o("q-list",[o("q-item-label",{attrs:{header:""}},[r._v("Add pane")]),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return r.addPublisher(e)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"mdi-publish"}})],1),o("q-item-section",[o("q-item-label",[r._v("Publisher")])],1)],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return r.addSubscriber(e)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"mdi-arrow-down-bold"}})],1),o("q-item-section",[o("q-item-label",[r._v("Subscriber")])],1)],1),r.activeClient&&-1!==r.activeClient.config.host.indexOf("flespi")?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return r.$refs.felspiModal.open()}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"mdi-star-outline"}})],1),o("q-item-section",[o("q-item-label",[r._v("Flespi subscriber")])],1)],1):r._e()],1)],1)],1):r._e(),r.activeClient?o("q-btn",{attrs:{round:"",flat:"",dark:"",icon:"mdi-menu"},on:{click:function(e){e.stopPropagation(),r.drawerRight=!r.drawerRight}}}):r._e(),r.activeClient||r.whiteLabel?r._e():o("q-btn",{staticStyle:{"margin-right":"60px"},attrs:{dense:"",flat:"",color:"white",icon:"mdi-github-circle",label:r.$q.platform.is.mobile?"":"Fork me!"},on:{click:function(e){return r.openURL("https://github.com/flespi-software/MQTT-Board")}}})],1),r.activeClient?r._e():o("q-btn",{staticStyle:{position:"absolute",right:"16px",top:"21px","z-index":"2"},attrs:{fab:"",icon:"mdi-plus",color:r.accentColor},nativeOn:{click:function(e){return r.addClientHandler(e)}}})],1),r.activeClient?o("q-drawer",{attrs:{side:"right",bordered:"",breakpoint:500,"content-class":"bg-grey-3 absolute","content-style":r.$q.platform.is.desktop?"height: calc(100% - 50px)!important; top: 50px;":""},model:{value:r.drawerRight,callback:function(e){r.drawerRight=e},expression:"drawerRight"}},[o("entities-menu",{attrs:{entities:r.menuEnitites},on:{hide:r.hideEntity,show:r.showEntity,"subscriber:play":function(e){return r.subscribeMessageHandler(r.activeClient.id,e)},"subscriber:stop":function(e){return r.unsubscribeMessageHandler(r.activeClient.id,e)},publish:r.publishFreeMessage}})],1):r._e(),o("q-page-container",[o("q-page",[o("div",[o("flespi-topic",{ref:"felspiModal",on:{topic:function(e){r.addSubscriber(),r.subscribers[r.subscribers.length-1].topic=e}}}),r.republishMessage?o("publisher-modal",{ref:"publisherModal",attrs:{message:r.republishMessage,version:r.activeClient.config.protocolVersion},on:{publish:r.publishFreeMessage,hide:function(e){r.republishMessage=null}}}):r._e(),o("q-dialog",{attrs:{"content-class":"mqtt-board__popup",maximized:r.$q.platform.is.mobile},on:{show:r.showSettingsModalHandler,hide:r.clearCurrentSettings},model:{value:r.settingsModalModel,callback:function(e){r.settingsModalModel=e},expression:"settingsModalModel"}},[o("q-card",{style:{minWidth:r.$q.platform.is.mobile?"100%":"50vw"}},[o("q-card-section",{staticClass:"q-pa-none",class:(t={},t["bg-"+r.color]=!0,t["text-white"]=!!r.color,t)},[o("q-toolbar",{class:(s={},s["bg-"+r.color]=!0,s["text-white"]=!!r.color,s)},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"keyboard_arrow_left"},on:{click:r.revertSettings}}),o("q-toolbar-title",[r._v("\n                     Connection settings\n                   ")])],1)],1),o("q-separator"),o("q-card-section",{staticClass:"scroll",style:{height:r.$q.platform.is.mobile?"calc(100% - 94px)":"50vh"}},[o("div",[o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",label:"Client name"},model:{value:r.currentSettings.clientName,callback:function(e){r.$set(r.currentSettings,"clientName",e)},expression:"currentSettings.clientName"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",label:"Client ID",error:!r.currentSettings.clientId,"hide-bottom-space":""},model:{value:r.currentSettings.clientId,callback:function(e){r.$set(r.currentSettings,"clientId",e)},expression:"currentSettings.clientId"}},[o("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-refresh",flat:"",round:""},on:{click:function(e){r.currentSettings.clientId="mqtt-board-"+Math.random().toString(16).substr(2,8)}},slot:"append"})],1),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",label:"Host",error:!r.currentSettings.host,"error-message":"Host must be not empty and only over secured sockets","hide-bottom-space":""},model:{value:r.currentSettings.host,callback:function(e){r.$set(r.currentSettings,"host",e)},expression:"currentSettings.host"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"number",label:"Keep alive",error:!r.isNil(r.currentSettings.keepalive)&&(r.currentSettings.keepalive<=0||r.currentSettings.keepalive>65535)},model:{value:r.currentSettings.keepalive,callback:function(e){r.$set(r.currentSettings,"keepalive",r._n(e))},expression:"currentSettings.keepalive"}}),o("q-select",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","popup-content-class":"mqtt-board__popup","map-options":"","emit-value":"",options:[{label:"3.1.1",value:4},{label:"5.0",value:5}],label:"Version of MQTT","hide-bottom-space":"","options-selected-class":"bg-grey-2 text-grey-9"},model:{value:r.currentSettings.protocolVersion,callback:function(e){r.$set(r.currentSettings,"protocolVersion",e)},expression:"currentSettings.protocolVersion"}}),o("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:5===r.currentSettings.protocolVersion?"Clean start":"Clean session"},model:{value:r.currentSettings.clean,callback:function(e){r.$set(r.currentSettings,"clean",e)},expression:"currentSettings.clean"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Username"},model:{value:r.currentSettings.username,callback:function(e){r.$set(r.currentSettings,"username",e)},expression:"currentSettings.username"}},[-1!==r.currentSettings.host.indexOf("flespi")?o("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-login",flat:"",round:""},on:{click:r.flespiLoginHandler},slot:"append"}):r._e()],1),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Password"},model:{value:r.currentSettings.password,callback:function(e){r.$set(r.currentSettings,"password",e)},expression:"currentSettings.password"}}),5===r.currentSettings.protocolVersion?o("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{label:"Properties"}},[o("div",{staticClass:"q-px-md q-py-sm"},[o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"number",min:0,clearable:"",label:"Session expiry interval",error:!r.isNil(r.currentSettings.properties.sessionExpiryInterval)&&(r.currentSettings.properties.sessionExpiryInterval<0||r.currentSettings.properties.sessionExpiryInterval>4294967295)},on:{clear:function(e){r.currentSettings.properties.sessionExpiryInterval=void 0}},model:{value:r.currentSettings.properties.sessionExpiryInterval,callback:function(e){r.$set(r.currentSettings.properties,"sessionExpiryInterval",r._n(e))},expression:"currentSettings.properties.sessionExpiryInterval"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Receive maximum",clearable:"",outlined:"","hide-bottom-space":"",error:!r.isNil(r.currentSettings.properties.receiveMaximum)&&(r.currentSettings.properties.receiveMaximum<=0||r.currentSettings.properties.receiveMaximum>65535)},on:{clear:function(e){r.currentSettings.properties.receiveMaximum=void 0}},model:{value:r.currentSettings.properties.receiveMaximum,callback:function(e){r.$set(r.currentSettings.properties,"receiveMaximum",r._n(e))},expression:"currentSettings.properties.receiveMaximum"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Maximum packet size",clearable:"",outlined:"","hide-bottom-space":"",error:!r.isNil(r.currentSettings.properties.maximumPacketSize)&&(r.currentSettings.properties.maximumPacketSize<=0||r.currentSettings.properties.maximumPacketSize>4294967295)},on:{clear:function(e){r.currentSettings.properties.maximumPacketSize=void 0}},model:{value:r.currentSettings.properties.maximumPacketSize,callback:function(e){r.$set(r.currentSettings.properties,"maximumPacketSize",r._n(e))},expression:"currentSettings.properties.maximumPacketSize"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias maximum",clearable:"",outlined:"","hide-bottom-space":"",error:!r.isNil(r.currentSettings.properties.topicAliasMaximum)&&(r.currentSettings.properties.topicAliasMaximum<0||r.currentSettings.properties.topicAliasMaximum>65535)},model:{value:r.currentSettings.properties.topicAliasMaximum,callback:function(e){r.$set(r.currentSettings.properties,"topicAliasMaximum",r._n(e))},expression:"currentSettings.properties.topicAliasMaximum"}}),o("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Request-Response information"},model:{value:r.currentSettings.properties.requestResponseInformation,callback:function(e){r.$set(r.currentSettings.properties,"requestResponseInformation",e)},expression:"currentSettings.properties.requestResponseInformation"}}),o("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Request problem information"},model:{value:r.currentSettings.properties.requestProblemInformation,callback:function(e){r.$set(r.currentSettings.properties,"requestProblemInformation",e)},expression:"currentSettings.properties.requestProblemInformation"}}),o("div",{staticClass:"q-mb-sm"},[o("div",{staticClass:"q-mt-md"},[r._v("User Properties")]),o("div",[r.currentSettings.properties.userProperties?o("q-list",{staticClass:"q-mb-xs",attrs:{bordered:""}},r._l(r.currentSettings.properties.userProperties,(function(e,t){return o("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[o("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(e){return r.removeConnectUserProperty(t)}}}),o("span",[r._v(r._s(t+": "+e))])],1)})),1):r._e(),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"User property name",outlined:"","hide-bottom-space":""},model:{value:r.connectUserProperty.name,callback:function(e){r.$set(r.connectUserProperty,"name",e)},expression:"connectUserProperty.name"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"User property value",outlined:"","hide-bottom-space":""},model:{value:r.connectUserProperty.value,callback:function(e){r.$set(r.connectUserProperty,"value",e)},expression:"connectUserProperty.value"}}),o("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{color:"grey-9"},on:{click:r.addUserProperty}},[r._v("Add")])],1)]),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Authentication method",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.properties.authenticationMethod,callback:function(e){r.$set(r.currentSettings.properties,"authenticationMethod",e)},expression:"currentSettings.properties.authenticationMethod"}}),o("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",label:"Authentication data",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:r.currentSettings.properties.authenticationData,callback:function(e){r.$set(r.currentSettings.properties,"authenticationData",e)},expression:"currentSettings.properties.authenticationData"}})],1)]):r._e(),o("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{label:"Will"}},[o("div",{staticClass:"q-px-md q-py-sm"},[o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",error:!this.currentSettings.will.topic&&!!this.currentSettings.will.payload,label:"Will topic",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.will.topic,callback:function(e){r.$set(r.currentSettings.will,"topic",e)},expression:"currentSettings.will.topic"}}),o("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",error:!!this.currentSettings.will.topic&&!this.currentSettings.will.payload,type:"textarea",label:"Will payload",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:r.currentSettings.will.payload,callback:function(e){r.$set(r.currentSettings.will,"payload",e)},expression:"currentSettings.will.payload"}}),o("div",{staticClass:"q-my-sm"},[r._v("\n                         QoS\n                         "),o("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:r.currentSettings.will.qos,callback:function(e){r.$set(r.currentSettings.will,"qos",e)},expression:"currentSettings.will.qos"}})],1),o("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Will retain"},model:{value:r.currentSettings.will.retain,callback:function(e){r.$set(r.currentSettings.will,"retain",e)},expression:"currentSettings.will.retain"}}),5===r.currentSettings.protocolVersion?o("q-expansion-item",{staticClass:"bg-grey-4",attrs:{label:"Will properties"}},[o("div",{staticClass:"q-px-md q-py-sm"},[o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",clearable:"","hide-bottom-space":"",type:"number",label:"Will delay interval"},on:{clear:function(e){r.currentSettings.will.properties.willDelayInterval=void 0}},model:{value:r.currentSettings.will.properties.willDelayInterval,callback:function(e){r.$set(r.currentSettings.will.properties,"willDelayInterval",r._n(e))},expression:"currentSettings.will.properties.willDelayInterval"}}),o("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:r.currentSettings.will.properties.payloadFormatIndicator,callback:function(e){r.$set(r.currentSettings.will.properties,"payloadFormatIndicator",e)},expression:"currentSettings.will.properties.payloadFormatIndicator"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",clearable:"",outlined:"","hide-bottom-space":""},on:{clear:function(e){r.currentSettings.will.properties.messageExpiryInterval=void 0}},model:{value:r.currentSettings.will.properties.messageExpiryInterval,callback:function(e){r.$set(r.currentSettings.will.properties,"messageExpiryInterval",r._n(e))},expression:"currentSettings.will.properties.messageExpiryInterval"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Content type",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.will.properties.contentType,callback:function(e){r.$set(r.currentSettings.will.properties,"contentType",e)},expression:"currentSettings.will.properties.contentType"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.will.properties.responseTopic,callback:function(e){r.$set(r.currentSettings.will.properties,"responseTopic",e)},expression:"currentSettings.will.properties.responseTopic"}}),o("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",label:"Correlation data",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:r.currentSettings.will.properties.correlationData,callback:function(e){r.$set(r.currentSettings.will.properties,"correlationData",e)},expression:"currentSettings.will.properties.correlationData"}}),o("div",[o("div",{staticClass:"q-mt-md"},[r._v("Will user properties")]),o("div",[r.currentSettings.will.properties.userProperties?o("q-list",{staticClass:"q-mb-xs",staticStyle:{"border-color":"#b7b7b7"}},r._l(r.currentSettings.will.properties.userProperties,(function(e,t){return o("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[o("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(e){return r.removeWillConnectUserProperty(t)}}}),o("span",[r._v(r._s(t+": "+e))])],1)})),1):r._e(),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Will user property name",outlined:"","hide-bottom-space":""},model:{value:r.willConnectUserProperty.name,callback:function(e){r.$set(r.willConnectUserProperty,"name",e)},expression:"willConnectUserProperty.name"}}),o("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Will user property value",outlined:"","hide-bottom-space":""},model:{value:r.willConnectUserProperty.value,callback:function(e){r.$set(r.willConnectUserProperty,"value",e)},expression:"willConnectUserProperty.value"}}),o("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{color:"grey-9"},on:{click:r.addWillUserProperty}},[r._v("Add")])],1)])],1)]):r._e()],1)])],1)]),o("q-separator"),o("q-card-actions",{class:(i={},i["bg-"+r.color]=!0,i["text-white"]=!!r.color,i),attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm",attrs:{flat:"",dense:""},on:{click:r.revertSettings}},[r._v("Close")]),o("q-btn",{attrs:{flat:"",dense:"",disable:!r.isCurrentSettingsValid},on:{click:r.saveSettingsHandler}},[r._v("Save")])],1)],1)],1),r.activeClient?r.renderedEntities.length?o("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:r.swipeHandler,expression:"swipeHandler",modifiers:{horizontal:!0}}],ref:"wrapper",staticClass:"no-wrap row client__wrapper"},[r._l(r.renderedEntities,(function(e,t){return["publisher"===e.type?o("publisher",{key:"publ"+e.id,ref:"entities",refInFor:!0,class:[r.colsCountClass],attrs:{value:r.publishers[e.index],version:r.activeClient.config.protocolVersion},on:{input:function(t){r.inputPublisher(e.index,t)},remove:function(t){return r.removePublisher(e.index)},publish:function(t){return r.publishMessageHandler(r.activeClient.id,e.index)}}}):"subscriber"===e.type?o("subscriber",{key:"subs"+e.id,ref:"entities",refInFor:!0,class:[r.colsCountClass],attrs:{value:r.subscribers[e.index],status:r.subscribersStatuses[e.index],subscribed:r.subscribersConnectivityStatuses[e.index],messages:r.subscribersMessages[e.index],version:r.activeClient.config.protocolVersion},on:{input:function(t){r.inputSubscriber(e.index,t)},remove:function(t){return r.removeSubscriber(e.index)},subscribe:function(t){return r.subscribeMessageHandler(r.activeClient.id,e.index)},unsubscribe:function(t){return r.unsubscribeMessageHandler(r.activeClient.id,e.index)},play:function(t){return r.playSubscriberHandler(e.index)},pause:function(t){return r.pauseSubscriberHandler(e.index)},clear:function(t){return r.clearMessagesHandler(e.index)},"action:send":r.sendFromSubscriberHandler}}):"unresolved"===e.type?o("unresolved",{key:"unresolved"+t,ref:"entities",refInFor:!0,class:[r.colsCountClass],attrs:{messages:r.notResolvedMessages},on:{clear:r.clearUnresolvedMessages}}):"logs"===e.type?o("logs",{key:"subs"+t,ref:"entities",refInFor:!0,class:[r.colsCountClass],attrs:{logs:r.activeClient.logs},on:{clear:r.clearLogs}}):r._e()]}))],2):r.renderedEntities.length?r.statuses[r.activeClient.id]||r.renderedEntities.length?r._e():o("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold absolute",staticStyle:{"font-size":"2.5rem",top:"50px",bottom:"0",left:"0",right:"0"}},[o("div",[r._v("Сlient is disconnected")])]):o("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold absolute",staticStyle:{"font-size":"2.5rem",top:"50px",bottom:"0",left:"0",right:"0"}},[r._v("No active entities")]):o("div",{staticClass:"absolute scroll",staticStyle:{top:"50px",left:"0",right:"0",bottom:"0"}},[Object.keys(r.clients).length?o("div",{staticClass:"mqtt-clients row q-pt-md"},r._l(r.clients,(function(e,t){return o("div",{key:t,staticClass:"client__item q-pt-md q-px-md cursor-pointer col-xl-3 col-md-4 col-sm-6 col-xs-12"},[o("q-card",{class:{"bg-red-2":!r.statuses[t],"bg-green-2":r.statuses[t]},nativeOn:{click:function(e){return r.setActiveClient(t)}}},[o("q-card-section",{staticClass:"q-py-sm"},[o("div",{staticClass:"ellipsis q-mb-xs",staticStyle:{"font-size":"18px","line-height":"18px","min-height":"18px"}},[r._v(r._s(e.config.clientName||e.config.clientId))]),o("div",{staticClass:"ellipsis text-grey-9",staticStyle:{"font-size":"14px","line-height":"14px","min-height":"14px"}},[r._v(r._s(e.config.clientName?e.config.clientId:""))]),o("div",{staticClass:"text-grey-9 q-mt-sm"},[r._v(r._s(e.config.host))])]),o("q-separator"),o("q-card-actions",{attrs:{align:"right"}},[e.client?o("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-stop",loading:!!e.client&&!r.statuses[t]&&e.inited},on:{click:function(e){return e.stopPropagation(),r.disconnectClientHandler(t)}}},[o("div",{attrs:{slot:"loading"},on:{click:function(e){e.stopPropagation()}},slot:"loading"},[o("q-spinner")],1),o("q-tooltip",[r._v("Deactivate client")])],1):o("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-play"},on:{click:function(e){return e.stopPropagation(),r.connectClientHandler(t)}}},[o("q-tooltip",[r._v("Activate client")])],1),o("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-settings"},on:{click:function(e){return e.stopPropagation(),r.editClientHandler(t)}}}),o("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-delete"},on:{click:function(e){return e.stopPropagation(),r.deleteClientHandler(t)}}})],1)],1)],1)})),0):o("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold",staticStyle:{"font-size":"2.5rem"}},[o("div",[r._v("No clients")]),r.activeClient?r._e():o("q-btn",{nativeOn:{click:function(e){return r.addClientHandler(e)}}},[r._v("Create client")])],1)])],1)])],1)],1)],1)},o=[],a=(s("8e6e"),s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("4db1")),l=s.n(a),c=(s("8615"),s("6c7b"),s("967e")),p=s.n(c),u=(s("96cf"),s("fa84")),d=s.n(u),b=(s("20d6"),s("28a5"),s("a481"),s("6762"),s("2fdb"),s("7f7f"),s("6b54"),s("c47a")),m=s.n(b),g=(s("ac6a"),s("cadf"),s("06db"),s("456d"),s("551c"),s("fc74")),h=s.n(g),f=s("59a1"),v=s.n(f),y=s("e7fc"),q=s.n(y),x=function(){function e(t){h()(this,e),this._client=t}return v()(e,[{key:"publish",value:function(){for(var e=this,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return new Promise((function(t,i){var r;(r=e._client).publish.apply(r,s.concat([function(e,s){e?i(e):t(s)}]))}))}},{key:"subscribe",value:function(){for(var e=this,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return new Promise((function(t,i){var r;(r=e._client).subscribe.apply(r,s.concat([function(e,s){e?i(e):t(s)}]))}))}},{key:"unsubscribe",value:function(){for(var e=this,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return new Promise((function(t,i){var r;(r=e._client).unsubscribe.apply(r,s.concat([function(e,s){e?i(e):t(s)}]))}))}},{key:"end",value:function(){for(var e=this,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return new Promise((function(t,i){var r;(r=e._client).end.apply(r,s.concat([function(e,s){e?i(e):t(s)}]))}))}},{key:"reconnect",value:function(){var e;return(e=this._client).reconnect.apply(e,arguments)}},{key:"addListener",value:function(){var e;return(e=this._client).addListener.apply(e,arguments)}},{key:"emit",value:function(){var e;return(e=this._client).emit.apply(e,arguments)}},{key:"eventNames",value:function(){var e;return(e=this._client).eventNames.apply(e,arguments)}},{key:"getLastMessageId",value:function(){var e;return(e=this._client).getLastMessageId.apply(e,arguments)}},{key:"getMaxListeners",value:function(){var e;return(e=this._client).getMaxListeners.apply(e,arguments)}},{key:"listenerCount",value:function(){var e;return(e=this._client).listenerCount.apply(e,arguments)}},{key:"listeners",value:function(){var e;return(e=this._client).listeners.apply(e,arguments)}},{key:"off",value:function(){var e;return(e=this._client).off.apply(e,arguments)}},{key:"on",value:function(){var e;return(e=this._client).on.apply(e,arguments)}},{key:"once",value:function(){var e;return(e=this._client).once.apply(e,arguments)}},{key:"prependListener",value:function(){var e;return(e=this._client).prependListener.apply(e,arguments)}},{key:"prependOnceListener",value:function(){var e;return(e=this._client).prependOnceListener.apply(e,arguments)}},{key:"rawListeners",value:function(){var e;return(e=this._client).rawListeners.apply(e,arguments)}},{key:"removeAllListeners",value:function(){var e;return(e=this._client).removeAllListeners.apply(e,arguments)}},{key:"removeListener",value:function(){var e;return(e=this._client).removeListener.apply(e,arguments)}},{key:"removeOutgoingMessage",value:function(){var e;return(e=this._client).removeOutgoingMessage.apply(e,arguments)}},{key:"setMaxListeners",value:function(){var e;return(e=this._client).setMaxListeners.apply(e,arguments)}},{key:"handleMessage",set:function(e){this._client.handleMessage=e},get:function(){return this._client.handleMessage}},{key:"connected",get:function(){return this._client.connected}},{key:"reconnecting",get:function(){return this._client.reconnecting}}]),e}(),S={connect:function(e,t){var s=q.a.connect(e,t),i=new x(s);return i},connectAsync:function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=q.a.connect(e,t),r=new x(i);return new Promise((function(e,t){var n={connect:function(t){o(),e(r)},end:function(){o(),e(r)},error:function(e){o(),i.end(),t(e)}};!1===s&&(n.close=function(){n.error("Couldn't connect to server")});var o=function(){Object.keys(n).forEach((function(e){i.removeListener(e,n[e])}))};Object.keys(n).forEach((function(e){i.on(e,n[e])}))}))},AsyncClient:x},C=s("42454"),_=s.n(C),w=s("0644"),k=s.n(w),P=s("2768"),$=s.n(P),M=s("9b02"),U=s.n(M),I=s("b047c"),O=s.n(I),E=s("18d6"),A=s("b06b"),T=s("1732"),N=function(e){return e},H={};function j(e){var t=e.name,s=e.duration,i=void 0===s?300:s,r=e.to,n=e.from,o=e.apply,a=e.done,l=e.cancel,c=e.easing,p=t,u=new Date;p?L(p):p=Object(T["a"])();var d=c||N,b=function e(){var t=(new Date-u)/i;t>1&&(t=1);var s=n+(r-n)*d(t);if(o(s,t),1===t)return delete H[p],void(a&&a(s));m.last={pos:s,progress:t},m.timer=requestAnimationFrame(e)},m=H[p]={cancel:l,timer:requestAnimationFrame(b)};return p}function L(e){if(e){var t=H[e];t&&t.timer&&(cancelAnimationFrame(t.timer),t.cancel&&t.cancel(t.last),delete H[e])}}var z={start:j,stop:L},R=function(){var e,t,s=this,i=s.$createElement,r=s._self._c||i;return r("q-dialog",{attrs:{"content-class":"mqtt-board__popup",maximized:s.$q.platform.is.mobile},model:{value:s.opened,callback:function(e){s.opened=e},expression:"opened"}},[r("q-card",{style:{minWidth:s.$q.platform.is.mobile?"100%":"30vw"}},[r("q-card-section",{staticClass:"q-pa-none"},[r("q-toolbar",{class:(e={},e["bg-"+s.color]=!0,e["text-white"]=!!s.color,e)},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"keyboard_arrow_left"},on:{click:s.clear}}),r("q-toolbar-title",[s._v("\n          Topic config\n        ")])],1)],1),r("q-separator"),r("q-card-section",{staticClass:"scroll",style:{height:s.$q.platform.is.mobile?"calc(100% - 94px)":"55vh"}},[r("div",[r("div",{staticClass:"q-mb-md q-py-sm",staticStyle:{overflow:"auto"}},[s._v(s._s(s.topic))]),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"q-mb-xs"},[s._v("Type:")]),r("q-btn-toggle",{attrs:{"toggle-color":"grey-9",dense:s.$q.platform.is.mobile,size:"sm",options:[{label:"any",value:"+"}].concat(s.types.map((function(e){return{label:e,value:e}})))},model:{value:s.type,callback:function(e){s.type=e},expression:"type"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"q-mb-xs"},[s._v("API:")]),r("q-btn-toggle",{attrs:{"toggle-color":"grey-9",dense:s.$q.platform.is.mobile,size:"sm",options:s.apis.map((function(e){return{label:e,value:e}}))},model:{value:s.api,callback:function(e){s.api=e},expression:"api"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"q-mb-xs"},[s._v("Entity:")]),s.entities.length?r("q-btn-toggle",{attrs:{dense:s.$q.platform.is.mobile,"toggle-color":"grey-9",size:"sm",options:[{label:"any",value:"+"}].concat(s.entities.map((function(e){return{label:e,value:e}})))},model:{value:s.entity,callback:function(e){s.entity=e},expression:"entity"}}):r("span",[s._v("Choose API")])],1),r("q-input",{staticClass:"q-mb-md",attrs:{color:"grey-9",label:"Identifier",outlined:""},model:{value:s.id,callback:function(e){s.id=e},expression:"id"}}),s.isNeedPostfix?r("q-input",{attrs:{color:"grey-9",outlined:"",label:"Postfix"},model:{value:s.postfix,callback:function(e){s.postfix=e},expression:"postfix"}}):s._e()],1)]),r("q-separator"),r("q-card-actions",{class:(t={},t["bg-"+s.color]=!0,t["text-white"]=!!s.color,t),attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""},on:{click:s.clear}},[s._v("Close")]),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""},on:{click:s.saveSettingsHandler}},[s._v("Save")])],1)],1)],1)},F=[],D={name:"FlespiTopicConfigurator",props:{color:{type:String,default:"grey-9"}},data:function(){return{opened:!1,topicBase:"flespi/",type:"+",types:["message","log","state"],api:"",posibleApis:["platform","gw","storage","mqtt"],entity:"+",posibleEntities:{gw:["channels","devices","streams","modems"],storage:["containers"],mqtt:["sessions"],platform:["customer"]},id:"",postfixModel:""}},computed:{apis:function(){var e=this.posibleApis;return"message"===this.type&&(e=["gw"]),"state"===this.type&&(e=["platform","gw","storage"]),this.setApi(e[0]),e},entities:function(){return"message"===this.type?["channels","devices","modems"]:this.api?this.posibleEntities[this.api]:[]},postfix:{get:function(){return this.postfixModel?this.postfixModel:"state"===this.type?"":"#"},set:function(e){e?this.postfixModel=e:"state"===this.type?this.postfixModel="":this.postfixModel="#"}},topic:function(){var e=this.topicBase;return e+=this.type||"+",e+="/",e+=this.api||"+",e+="/",e+=this.entity||"+",e+="/",e+=this.id||"+",e+=this.postfix&&this.isNeedPostfix?"/".concat(this.postfix):"",e},isNeedPostfix:function(){return!("message"===this.type&&"gw"===this.api&&"devices"===this.entity)}},methods:{saveSettingsHandler:function(){this.$emit("topic",this.topic),this.clear()},clear:function(){this.type="+",this.api="",this.entity="+",this.id="",this.postfix=""},open:function(){this.opened=!0},setApi:function(e){this.api=e}},watch:{type:function(){this.api="",this.entity="+",this.id="",this.postfix=""},api:function(){this.entity="+",this.id="",this.postfix=""},entity:function(){this.id="",this.postfix=""}}},B=D,V=s("2877"),W=Object(V["a"])(B,R,F,!1,null,null,null),J=W.exports,Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mqtt-client__subscriber col-md-4 col-sm-6 col-xs-12"},[e.status||null!==e.isPlayed?s("q-card",{staticClass:"subscriber__item q-ma-sm"},[e.filterMode?s("q-input",{staticClass:"q-ma-sm q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Filter by topic",autofocus:""},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[s("q-btn",{attrs:{slot:"prepend",color:"grey-9",icon:"mdi-arrow-left",flat:"",round:""},on:{click:function(t){e.filterMode=!1,e.filter=""}},slot:"prepend"}),e.filter?s("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-close",flat:"",round:""},on:{click:function(t){e.filter=""}},slot:"append"}):e._e()],1):s("q-toolbar",{staticClass:"q-pr-none text-white bg-orange",staticStyle:{"border-top-right-radius":"0","border-top-left-radius":"0"}},[s("q-toolbar-title",{staticStyle:{width:"calc(100% - 150px)"}},[s("span",[e._v("\n          "+e._s(e.config.topic)+"\n          "),s("q-tooltip",[e._v(e._s(e.config.topic))])],1)]),0===e.config.mode?s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-magnify"},on:{click:function(t){e.filterMode=!0}}}):e._e(),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-stop",title:"Unsubscribe"},on:{click:function(t){return e.unsubscribeMessageHandler()}}}),s("q-btn",{attrs:{round:"",flat:"",icon:e.isPlayed&&"paused"!==e.status?"mdi-pause":"mdi-play",title:e.isPlayed&&"paused"!==e.status?"Pause":"Resume"},on:{click:e.playStopHandler}},["paused"===e.status&&e.value.missedMessages?s("q-chip",{staticClass:"absolute-top-right",staticStyle:{top:"-5px",right:"-5px"},attrs:{color:"red",dense:"","text-color":"white",size:".6rem",square:""}},[e._v("\n          "+e._s(e.value.missedMessages)+"\n        ")]):e._e()],1),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[s("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[s("q-list",[0===e.config.mode?s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(t){return e.clearMessagesHandler(t)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),s("q-item-section",[s("q-item-label",[e._v("Clear messages")])],1)],1):e._e(),0===e.config.mode?s("q-separator",{attrs:{spaced:""}}):e._e(),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{highlight:"",clickable:""},nativeOn:{click:function(t){return e.removeSubscriber()}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),s("q-item-section",[s("q-item-label",[e._v("Remove")])],1)],1)],1)],1)],1)],1),s("div",{staticStyle:{position:"relative"},style:{height:"calc(100% - "+(e.filterMode?"62px":"50px")+")"}},[e.messages&&e.messages.length&&0===e.config.mode?s("virtual-list",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:e.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"subscriber__list",attrs:{onscroll:e.listScroll,size:110,remain:15,item:e.Message,itemcount:e.renderedMessages.length,itemprops:e.getMessageProps}}):1===e.config.mode&&Object.keys(e.renderedMessages).length&&e.subscribed?s("div",{staticClass:"subscriber__list subscriber__list--tree"},[s("div",{staticClass:"scroll",staticStyle:{height:"60%"}},[s("tree",{attrs:{topic:e.treeSelectedTopic,data:e.renderedMessages},on:{change:e.treeValueChangeHandler}})],1),s("div",{staticClass:"scroll tree__message"},[e._l(e.treeModeValue,(function(t,i,r){return["undefined"!==typeof t.payload?s("message",{key:"tree-message-"+i+"-"+r,attrs:{message:t,highlight:e.config.highlight},on:{"action:send":function(t){e.$emit("action:send",t)}}}):s("div",{key:"tree-message-empty-"+r,staticClass:"text-center",staticStyle:{height:"100%"}},[s("div",{staticClass:"q-pt-sm text-grey-9",staticStyle:{"font-size":"1.5rem"}},[e._v("No messages")]),s("div",{staticClass:"text-grey-8"},[e._v(e._s(t.topic))]),s("q-icon",{attrs:{color:"red",name:"mail",size:"5rem"}})],1)]}))],2)]):e.status&&e.subscribed&&!e.processingFlag?s("div",{staticClass:"subscriber__list--empty"},[e._v("No messages")]):e._e(),s("q-inner-loading",{attrs:{showing:e.isNeedLoading}},[s("q-spinner-gears",{attrs:{size:"150px",color:"orange"}})],1)],1)],1):s("q-card",{staticClass:"subscriber__item q-ma-sm"},[s("q-card-section",{staticClass:"q-pa-none"},[s("q-toolbar",{staticClass:"q-pr-none text-white bg-orange"},[s("q-toolbar-title",[e._v("Subscriber")]),s("q-btn",{attrs:{round:"",flat:"",disable:!e.isValidSubscriber,icon:"mdi-play"},on:{click:e.subscribeMessageHandler}},[s("q-tooltip",[e._v("Subscribe")])],1),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[s("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(t){return e.removeSubscriber()}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),s("q-item-section",[s("q-item-label",[e._v("Remove")])],1)],1)],1)],1)],1)],1)],1),s("q-card-section",{staticClass:"item__main q-py-none"},[s("div",{staticClass:"q-pt-md"},[s("q-input",{staticClass:"q-mb-xs",attrs:{disable:e.status,color:"grey-9",outlined:"","hide-bottom-space":"",label:"Topic",error:!e.isValidSubscriber},model:{value:e.config.topic,callback:function(t){e.$set(e.config,"topic",t)},expression:"config.topic"}},[0===e.config.topic.indexOf("$share")?s("q-btn",{attrs:{slot:"append",color:"yellow-9",icon:"mdi-alert",flat:"",round:""},on:{click:e.showSharedSubscriptionNotification},slot:"append"}):e._e()],1),s("q-btn-toggle",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mt-md",staticStyle:{width:"100%"},attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:e.modeSelectOptions},on:{input:e.changeModeHandler},model:{value:e.config.mode,callback:function(t){e.$set(e.config,"mode",t)},expression:"config.mode"}}),1===e.config.mode&&5===e.version?s("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Field to group by",hint:"User properties field name by which messages will be grouped."},model:{value:e.config.treeField,callback:function(t){e.$set(e.config,"treeField",t)},expression:"config.treeField"}}):e._e(),s("q-toggle",{staticClass:"q-my-md",attrs:{color:"grey-9",label:"Highlight messages content"},model:{value:e.config.highlight,callback:function(t){e.$set(e.config,"highlight",t)},expression:"config.highlight"}}),s("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{value:!0,label:"Options"}},[s("div",{staticClass:"q-pa-sm"},[s("div",{staticClass:"q-px-md q-py-sm"},[e._v("\n              QoS\n              "),s("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{disable:e.status,flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.qos,callback:function(t){e.$set(e.config.options,"qos",t)},expression:"config.options.qos"}})],1),5===e.version?s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{disable:e.status,color:"grey-9",label:"No local"},model:{value:e.config.options.nl,callback:function(t){e.$set(e.config.options,"nl",t)},expression:"config.options.nl"}}):e._e(),5===e.version?s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{disable:e.status,color:"grey-9",label:"Retain as Published"},model:{value:e.config.options.rap,callback:function(t){e.$set(e.config.options,"rap",t)},expression:"config.options.rap"}}):e._e(),5===e.version?s("div",[s("div",{staticClass:"q-mb-sm"},[e._v("\n                Retain handling\n                "),s("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{disable:e.status,flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.rh,callback:function(t){e.$set(e.config.options,"rh",t)},expression:"config.options.rh"}})],1)]):e._e(),5===e.version?s("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{label:"Properties"}},[s("div",{staticClass:"q-px-md q-py-sm"},[s("q-input",{staticClass:"q-my-xs",attrs:{disable:e.status,color:"grey-9",label:"Subscription identifier",clearable:"",type:"number",outlined:"","hide-bottom-space":"",error:!e.isNil(e.config.options.properties.subscriptionIdentifier)&&(e.config.options.properties.subscriptionIdentifier<=0||e.config.options.properties.subscriptionIdentifier>268435455)},on:{clear:function(t){e.config.options.properties.subscriptionIdentifier=void 0}},model:{value:e.config.options.properties.subscriptionIdentifier,callback:function(t){e.$set(e.config.options.properties,"subscriptionIdentifier",e._n(t))},expression:"config.options.properties.subscriptionIdentifier"}}),!e.status||e.config.options.properties.userProperties?s("div",[s("div",{staticClass:"q-mt-md"},[e._v("User Properties")]),s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Also use to unsubscribe"},model:{value:e.needUseSubUserPropsToUnsub,callback:function(t){e.needUseSubUserPropsToUnsub=t},expression:"needUseSubUserPropsToUnsub"}}),s("div",[e.config.options.properties.userProperties?s("q-list",{staticClass:"q-mb-xs"},e._l(e.config.options.properties.userProperties,(function(t,i){return s("q-item",{key:i+": "+t,staticStyle:{"min-height":"17px"}},[e.status?e._e():s("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removeSubscriberUserProperty(i)}}}),s("span",[e._v(e._s(i+": "+t))])],1)})),1):e._e(),e.status?e._e():s("q-input",{staticClass:"q-my-xs",attrs:{outlined:"","hide-bottom-space":"",color:"grey-9",label:"User property name"},model:{value:e.subscriberUserProperty.name,callback:function(t){e.$set(e.subscriberUserProperty,"name",t)},expression:"subscriberUserProperty.name"}}),e.status?e._e():s("q-input",{staticClass:"q-my-xs",attrs:{outlined:"","hide-bottom-space":"",color:"grey-9",label:"User property value"},model:{value:e.subscriberUserProperty.value,callback:function(t){e.$set(e.subscriberUserProperty,"value",t)},expression:"subscriberUserProperty.value"}}),e.status?e._e():s("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.subscriberUserProperty.name||!e.subscriberUserProperty.value,color:"grey-9"},on:{click:e.addSubscriberUserProperty}},[e._v("Add")])],1)],1):e._e()],1)]):e._e(),5!==e.version||e.needUseSubUserPropsToUnsub?e._e():s("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{value:!!e.config.unsubscribeProperties.userProperties,label:"Unsubscribe properties"}},[!e.status||e.config.unsubscribeProperties.userProperties?s("div",{staticClass:"q-px-md q-py-sm"},[s("div",{staticClass:"q-mt-md"},[e._v("User Properties")]),s("div",[e.config.unsubscribeProperties.userProperties?s("q-list",{staticClass:"q-mb-xs"},e._l(e.config.unsubscribeProperties.userProperties,(function(t,i){return s("q-item",{key:i+": "+t,staticStyle:{"min-height":"17px"}},[e.status?e._e():s("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removeUnsubscribeUserProperty(i)}}}),s("span",[e._v(e._s(i+": "+t))])],1)})),1):e._e(),e.status?e._e():s("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:e.unsubscribeUserProperty.name,callback:function(t){e.$set(e.unsubscribeUserProperty,"name",t)},expression:"unsubscribeUserProperty.name"}}),e.status?e._e():s("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:e.unsubscribeUserProperty.value,callback:function(t){e.$set(e.unsubscribeUserProperty,"value",t)},expression:"unsubscribeUserProperty.value"}}),e.status?e._e():s("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.unsubscribeUserProperty.name||!e.unsubscribeUserProperty.value,color:"grey-9"},on:{click:e.addUnsubscribeUserProperty}},[e._v("Add")])],1)]):e._e()])],1)])],1)])],1)],1)},Y=[],K=(s("f751"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"user-select":"none"},style:e.$q.platform.is.desktop?{display:"inline-block",minWidth:"100%"}:[]},[e._l(e.limitedKeys,(function(t,i){return[s("div",{key:""+t,staticClass:"cursor-pointer",class:{"bg-grey-2":e.topic&&e.topic===e.data[t].topic},style:{paddingLeft:10*e.nesting+(e.data[t].children?0:14)+"px",display:e.$q.platform.is.desktop?"inline-block":"",minWidth:e.$q.platform.is.desktop?"100%":"",overflow:e.$q.platform.is.desktop?"":"hidden",textOverflow:e.$q.platform.is.desktop?"":"ellipsis"},on:{click:function(s){return e.toggle(t,i)}}},[e.data[t].children?[e.showObj[t]?s("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:"grey-9",name:"mdi-menu-down"}}):s("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:"grey-9",name:"mdi-menu-right"}})]:e._e(),s("span",{class:{"text-grey-9":!0,"text-italic":!t,"text-grey-10":e.data[t].value,"text-bold":e.data[t].value}},[e._v(e._s(t||"*Empty*"))])],2),e.showObj[t]&&e.data[t].children?s("tree-mode-view",{key:"nest-"+t,attrs:{nesting:e.nesting+1,topic:e.topic,data:e.data[t].children},on:{change:function(t){e.$emit("change",t)}}}):e._e()]})),e.keys.length>e.limitedKeys.length?s("div",{staticClass:"more-button cursor-pointer text-bold",staticStyle:{display:"inline-block"},style:{marginLeft:10*e.nesting+14+"px"},on:{click:function(t){e.limit+=1e3}}},[e._v("\n    more "+e._s(e.keys.length-e.limit>=1e3?1e3:e.keys.length-e.limit)+"\n  ")]):e._e()],2)}),G=[],X=(s("c5f6"),{name:"TreeModeView",props:{data:Object,topic:String,nesting:{type:Number,default:0}},data:function(){for(var e={},t=Object.keys(this.data),s=t.length,i=0,r=s;i<r;i++)e[t[i]]=!1;return{showObj:e,limit:1e4}},computed:{keys:function(){return Object.keys(this.data).sort((function(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),e!==t){var s=Number(e),i=Number(t);return s+""===e&&i+""===t?s-i:e>t?1:-1}}))},limitedKeys:function(){return this.keys.slice(0,this.limit)}},methods:{toggle:function(e,t){this.$set(this.showObj,e,!this.showObj[e]),this.$emit("change",this.data[e].topic)}}}),Z=X,ee=(s("fbcf"),Object(V["a"])(Z,K,G,!1,null,null,null)),te=ee.exports,se=s("89c1"),ie=s.n(se),re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticClass:"message q-my-sm q-mx-sm"},[s("div",{staticClass:"message__title q-pt-sm q-pl-sm q-pr-sm"},[s("div",{staticClass:"message__topic ellipsis",attrs:{title:e.message.topic}},[e._v("\n      "+e._s(e.message.topic)+"\n    ")]),s("div",{staticClass:"message__sys text-grey-7"},[e._v("\n      "+e._s("qos: "+e.message.qos+", dup: "+(e.message.dup?"+":"-")+", retain: "+(e.message.retain?"+":"-")+e.timestamp)+"\n    ")]),s("q-btn",{staticClass:"absolute-top-right",staticStyle:{top:"10px",right:"8px",transform:"rotate(-45deg)"},attrs:{color:"indigo-4",size:"sm",flat:"",icon:"mdi-send",round:""},on:{click:function(t){return e.$emit("action:send",e.message)}}},[s("q-tooltip",{staticClass:"desktop-only"},[e._v("Resend message")])],1)],1),s("div",{staticClass:"message__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2 relative-position"},["string"!==typeof e.payload||e.payload.length?e.highlight?s("json-tree",{attrs:{data:e.payload}}):e.highlight?e._e():s("div",{staticClass:"message__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2"},[e._v(e._s(e.message.payload))]):s("div",[e._v("No message")]),e.canCopy?s("q-btn",{staticStyle:{position:"absolute",right:"0",bottom:"2px"},attrs:{icon:"content_copy",size:"0.7rem",flat:"",color:"orange"},on:{click:e.copyPayloadHandler}}):e._e()],1),s("div",{staticClass:"message__properties q-pa-sm text-grey-7"},[e._v(e._s(JSON.stringify(e.message.properties)))])])},ne=[],oe=s("bd4c"),ae=s("cdde"),le=function(){var e,t=this,s=t.$createElement,i=t._self._c||s;return t.data&&(Array.isArray(t.data)||"object"===typeof t.data)?i("div",[i("span",{class:{"text-white":void 0!==t.inverted}},[t._v(t._s(Array.isArray(t.data)?"[":"{"))]),t._l(t.data,(function(e,s,r){var n;return i("div",{key:s+"-"+r,staticClass:"margin-left"},[e&&"object"===typeof e?i("div",[i("div",{staticClass:"cursor-pointer",on:{click:function(e){t.toggle(Array.isArray(t.data)?s:r)}}},[t.showObj[Array.isArray(t.data)?s:r]?i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==t.inverted?"white":"grey-9",name:"mdi-menu-down"}}):i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==t.inverted?"white":"grey-9",name:"mdi-menu-right"}}),i("span",{class:[t.theme.label]},[t._v(t._s(s))]),i("span",{class:{"text-white":void 0!==t.inverted}},[t._v(" : "+t._s(Array.isArray(e)?"Array ["+e.length+"]":"Object"))])],1),t.showObj[Array.isArray(t.data)?s:r]?i("json-tree",{staticClass:"margin-left",attrs:{data:e,inverted:t.inverted}}):t._e()],1):i("div",[i("span",{class:[t.theme.label]},[t._v(t._s(s))]),i("span",{class:{"text-white":void 0!==t.inverted}},[t._v(" : ")]),i("span",{class:(n={},n[t.theme.typeNumberOrBool]="number"===typeof e||"boolean"===typeof e,n[t.theme.typeString]="string"===typeof e,n[t.theme.typeEmpty]="undefined"===typeof e||null===e,n)},[t._v(t._s(JSON.stringify(e)))])])])})),i("span",{class:{"text-white":void 0!==t.inverted}},[t._v(t._s(Array.isArray(t.data)?"]":"}"))])],2):i("div",[i("span",{class:(e={},e[t.theme.typeNumberOrBool]="number"===typeof t.data||"boolean"===typeof t.data,e[t.theme.typeString]="string"===typeof t.data,e[t.theme.typeEmpty]="undefined"===typeof t.data||null===t.data,e),staticStyle:{"font-size":"1rem"}},[t._v(t._s(""+t.data))])])},ce=[],pe={name:"JsonTree",props:{data:{requered:!0},inverted:function(){return!0}},data:function(){for(var e=[],t=this.data?Object.keys(this.data).length:0,s=0,i=t;s<i;s++)e.push(!0);return{showObj:e}},computed:{theme:function(){return void 0!==this.inverted?{label:"text-pink-4",typeString:"text-red-3",typeNumberOrBool:"text-blue-3",typeEmpty:"text-grey-5"}:{label:"text-pink-8",typeString:"text-red-6",typeNumberOrBool:"text-blue-6",typeEmpty:"text-grey-6"}}},methods:{toggle:function(e){this.$set(this.showObj,e,!this.showObj[e])}}},ue=pe,de=(s("ab66"),Object(V["a"])(ue,le,ce,!1,null,null,null)),be=de.exports,me={name:"Message",props:["message","highlight"],computed:{canCopy:function(){return!("string"===typeof this.payload&&!this.payload.length)&&!!ae["a"]},payload:function(){return this.message.payload},timestamp:function(){return this.message.properties&&this.message.properties.userProperties&&this.message.properties.userProperties.timestamp?", ".concat(oe["a"].formatDate(1e3*this.message.properties.userProperties.timestamp,"DD/MM/YYYY HH:mm:ss")):""}},methods:{copyPayloadHandler:function(){var e=this;Object(ae["a"])("string"===typeof this.payload?this.payload:JSON.stringify(this.payload)).then((function(t){e.$q.notify({color:"positive",icon:"content_copy",message:'<div class="text-center" style="font-size: 1.2rem;">Payload copied</div>',html:!0,timeout:1e3})}),(function(t){e.$q.notify({color:"negative",icon:"content_copy",message:'<div class="text-center" style="font-size: 1.2rem;">Coping error</div>',html:!0,timeout:1e3})}))}},components:{JsonTree:be}},ge=me,he=(s("4b39"),Object(V["a"])(ge,re,ne,!1,null,"265671e8",null)),fe=he.exports,ve={methods:{validateTopic:function(e){for(var t=e.split("/"),s=0;s<t.length;s++)if("+"!==t[s]){if("#"===t[s])return s===t.length-1;if(-1!==t[s].indexOf("+")||-1!==t[s].indexOf("#"))return!1}return!0}}},ye=0,qe=1,xe={name:"Subscriber",props:["value","messages","status","version","subscribed"],data:function(){return{filterMode:!1,config:this.value,loadingStatus:!1,needUseSubUserPropsToUnsub:!1,subscriberUserProperty:{value:"",name:""},unsubscribeUserProperty:{value:"",name:""},modeSelectOptions:[{label:"History",value:ye},{label:"Tree",value:qe}],needAutoScroll:!0,isPlayed:this.status||null,filter:"",treeSelectedTopic:null,processingFlag:null,Message:fe}},computed:{renderedMessages:function(){var e=this,t=[];switch(this.config.mode){case ye:t=this.filter?this.messages.filter((function(t){return-1!==t.topic.indexOf(e.filter)})):this.messages;break;case qe:t=this.messages;break}return t},treeModeValue:function(){var e=this,t=null;if(this.config.mode===qe){if(null===this.treeSelectedTopic)return{"":{topic:"*Empty*"}};var s=this.treeSelectedTopic.split("/");t=s.reduce((function(t,i,r){return r===s.length-1?t[i]?t[i].value&&Object.keys(t[i].value).reduce((function(e,s){return e[s]=JSON.parse(t[i].value[s]),e}),{}):(e.treeValueChangeHandler(null),{"":{topic:"*Empty*"}}):t[i].children}),this.messages),t&&Object.keys(t).length||(t={"":{topic:this.treeSelectedTopic}})}return t},isValidSubscriber:function(){return!!this.config.topic&&this.validateTopic(this.config.topic)&&($()(this.config.options.properties.subscriptionIdentifier)||this.config.options.properties.subscriptionIdentifier>0&&this.config.options.properties.subscriptionIdentifier<=268435455)},isNeedLoading:function(){return 1===this.config.mode&&this.status&&this.subscribed&&null===this.processingFlag&&this.checkProcessing(),1===this.config.mode&&this.status&&(!this.subscribed||!!this.processingFlag)}},methods:{isNil:$.a,checkProcessing:function(){var e=this;Object.keys(this.messages).length||(this.processingFlag=!0,setTimeout((function(){e.processingFlag=!1}),500))},getMessageProps:function(e){var t=this,s={key:"subMsg$".concat(e),props:{highlight:this.config.highlight,message:this.renderedMessages[e]},on:{"action:send":function(e){t.$emit("action:send",e)}}};return s},playStopHandler:function(){this.isPlayed?this.$emit("pause"):this.$emit("play"),this.isPlayed=!this.isPlayed},subscribeMessageHandler:function(){this.loadingStatus=!0,this.needUseSubUserPropsToUnsub&&this.$set(this.config.unsubscribeProperties,"userProperties",Object.assign({},this.config.options.properties.userProperties)),this.$emit("subscribe")},unsubscribeMessageHandler:function(e,t){this.isPlayed=null,this.treeSelectedTopic=null,this.clearScrollParams(),this.$emit("unsubscribe"),this.processingFlag=null},removeSubscriber:function(e){this.$emit("remove")},addSubscriberUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{}),this.$set(this.config.options.properties.userProperties,this.subscriberUserProperty.name,this.subscriberUserProperty.value),this.subscriberUserProperty={value:"",name:""}},removeSubscriberUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",null)},addUnsubscribeUserProperty:function(){this.config.unsubscribeProperties.userProperties||this.$set(this.config.unsubscribeProperties,"userProperties",{}),this.$set(this.config.unsubscribeProperties.userProperties,this.unsubscribeUserProperty.name,this.unsubscribeUserProperty.value),this.unsubscribeUserProperty={value:"",name:""}},removeUnsubscribeUserProperty:function(e){this.$delete(this.config.unsubscribeProperties.userProperties,e),Object.keys(this.config.unsubscribeProperties.userProperties).length||this.$set(this.config.unsubscribeProperties,"userProperties",null)},showSharedSubscriptionNotification:function(){this.$q.dialog({title:"Shared subscription info",message:"You are trying to subscribe to a Shared Subscription. Publication that matches its Topic Filter is sent to one of the subscribed sessions only.",color:"primary",ok:!0,preventClose:!0})},listScroll:function(e){if(this.status){var t=this.$refs.scroller&&this.$refs.scroller.$el;if(!t)return!1;t.scrollTop<t.scrollHeight-t.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0}},clearScrollParams:function(){this.currentScrollTop=0,this.allScrollTop=0,this.needAutoScroll=!0},clearMessagesHandler:function(){this.$emit("clear")},treeValueChangeHandler:function(e){this.treeSelectedTopic=e},changeModeHandler:function(){this.treeSelectedTopic=null}},watch:{config:{deep:!0,handler:function(e){this.$emit("input",e)}},status:function(e){e&&this.loadingStatus?(this.loadingStatus=!1,this.isPlayed=!0):e||(this.isPlayed=null)},value:{deep:!0,handler:function(e){this.config=e}}},components:{VirtualList:ie.a,Tree:te,Message:fe},directives:{autoscroll:{inserted:function(e,t){var s=t.value;s&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var s=t.value;setTimeout((function(){s&&(e.scrollTop=e.scrollHeight-e.clientHeight)}),50)}}},mixins:[ve]},Se=xe,Ce=(s("db71"),Object(V["a"])(Se,Q,Y,!1,null,null,null)),_e=Ce.exports,we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mqtt-client__publisher col-md-4 col-sm-6 col-xs-12"},[s("q-card",{staticClass:"publisher__item q-ma-sm"},[s("q-card-section",{staticClass:"q-pa-none"},[s("q-toolbar",{staticClass:"q-pr-none text-white bg-indigo"},[s("q-toolbar-title",[e._v("Publisher")]),s("q-btn",{attrs:{round:"",disable:!e.isValidPublisher,flat:"",icon:"mdi-send"},on:{click:function(t){return e.$emit("publish")}}},[s("q-tooltip",[e._v("Publish")])],1),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[s("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(t){return e.$emit("remove")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),s("q-item-section",[s("q-item-label",[e._v("Remove")])],1)],1)],1)],1)],1)],1)],1),s("q-card-section",{staticClass:"publisher__main q-pb-none"},[s("div",{staticClass:"q-mt-md"},[s("q-input",{staticClass:"q-mb-xs q-mt-sm",attrs:{color:"grey-9",label:"Topic",error:!e.isValidPublisher,outlined:"","hide-bottom-space":""},model:{value:e.config.topic,callback:function(t){e.$set(e.config,"topic",t)},expression:"config.topic"}}),s("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",autogrow:"",type:"textarea",label:"Message"},model:{value:e.config.payload,callback:function(t){e.$set(e.config,"payload",t)},expression:"config.payload"}}),s("q-expansion-item",{staticClass:"q-my-sm bg-grey-2",attrs:{value:!0,label:"Options"}},[s("div",{staticClass:"q-pa-sm"},[s("div",{staticClass:"q-px-md q-py-sm"},[s("div",{staticClass:"q-mb-sm"},[e._v("\n                QoS\n                "),s("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.qos,callback:function(t){e.$set(e.config.options,"qos",t)},expression:"config.options.qos"}})],1)]),s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Retain"},model:{value:e.config.options.retain,callback:function(t){e.$set(e.config.options,"retain",t)},expression:"config.options.retain"}}),s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Duplicate flag"},model:{value:e.config.options.dup,callback:function(t){e.$set(e.config.options,"dup",t)},expression:"config.options.dup"}}),5===e.version?s("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{label:"Properties"}},[s("div",{staticClass:"q-px-md q-py-sm"},[s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:e.config.options.properties.payloadFormatIndicator,callback:function(t){e.$set(e.config.options.properties,"payloadFormatIndicator",t)},expression:"config.options.properties.payloadFormatIndicator"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",clearable:"",outlined:"","hide-bottom-space":"",error:!e.isNil(e.config.options.properties.messageExpiryInterval)&&(e.config.options.properties.messageExpiryInterval<0||e.config.options.properties.messageExpiryInterval>4294967295)},on:{clear:function(t){e.config.options.properties.messageExpiryInterval=void 0}},model:{value:e.config.options.properties.messageExpiryInterval,callback:function(t){e.$set(e.config.options.properties,"messageExpiryInterval",e._n(t))},expression:"config.options.properties.messageExpiryInterval"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias",clearable:"",outlined:"","hide-bottom-space":"",error:!e.isNil(e.config.options.properties.topicAlias)&&(e.config.options.properties.topicAlias<=0||e.config.options.properties.topicAlias>65535)},on:{clear:function(t){e.config.options.properties.topicAlias=void 0}},model:{value:e.config.options.properties.topicAlias,callback:function(t){e.$set(e.config.options.properties,"topicAlias",e._n(t))},expression:"config.options.properties.topicAlias"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:e.config.options.properties.responseTopic,callback:function(t){e.$set(e.config.options.properties,"responseTopic",t)},expression:"config.options.properties.responseTopic"}}),s("q-input",{staticClass:"q-textarea--fix q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"textarea",autogrow:"",label:"Correlation data"},model:{value:e.config.options.properties.correlationData,callback:function(t){e.$set(e.config.options.properties,"correlationData",t)},expression:"config.options.properties.correlationData"}}),s("div",{staticClass:"q-mb-sm"},[s("div",{staticClass:"q-mt-md"},[e._v("User Properties")]),s("div",[e.config.options.properties.userProperties?s("q-list",{staticClass:"q-mb-xs"},e._l(e.config.options.properties.userProperties,(function(t,i){return s("q-item",{key:i+": "+t,staticStyle:{"min-height":"17px"}},[s("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removePublishUserProperty(i)}}}),s("span",[e._v(e._s(i+": "+t))])],1)})),1):e._e(),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:e.publishUserProperty.name,callback:function(t){e.$set(e.publishUserProperty,"name",t)},expression:"publishUserProperty.name"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:e.publishUserProperty.value,callback:function(t){e.$set(e.publishUserProperty,"value",t)},expression:"publishUserProperty.value"}}),s("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.publishUserProperty.name||!e.publishUserProperty.value,color:"grey-9"},on:{click:function(t){return e.addPublishUserProperty()}}},[e._v("Add")])],1)]),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Content type"},model:{value:e.config.options.properties.contentType,callback:function(t){e.$set(e.config.options.properties,"contentType",t)},expression:"config.options.properties.contentType"}})],1)]):e._e()],1)])],1)])],1)],1)},ke=[],Pe={name:"Publisher",props:["value","version"],data:function(){return{config:this.value,publishUserProperty:{value:"",name:""}}},computed:{isValidPublisher:function(){return!!this.config.topic&&this.validateTopic(this.config.topic)&&($()(this.config.options.properties.messageExpiryInterval)||this.config.options.properties.messageExpiryInterval>=0&&this.config.options.properties.messageExpiryInterval<=4294967295)&&($()(this.config.options.properties.topicAlias)||this.config.options.properties.topicAlias>0&&this.config.options.properties.topicAlias<=65535)}},methods:{isNil:$.a,addPublishUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{});var e=this.config.options.properties.userProperties;e[this.publishUserProperty.name]?Array.isArray(e[this.publishUserProperty.name])?e[this.publishUserProperty.name].push(this.publishUserProperty.value):this.$set(e,this.publishUserProperty.name,[e[this.publishUserProperty.name],this.publishUserProperty.value]):this.$set(e,this.publishUserProperty.name,this.publishUserProperty.value),this.publishUserProperty={value:"",name:""}},removePublishUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",null)}},watch:{config:{deep:!0,handler:function(e){this.$emit("input",e)}},value:{deep:!0,handler:function(e){this.config=e}}},mixins:[ve]},$e=Pe,Me=(s("57fe"),Object(V["a"])($e,we,ke,!1,null,null,null)),Ue=Me.exports,Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mqtt-client__not-resolved-msgs col-md-4 col-sm-6 col-xs-12"},[s("q-card",{staticClass:"not-resolved-msgs__main q-ma-sm"},[s("q-card-section",{staticClass:"q-pa-none"},[e.filterMode?s("q-input",{staticClass:"q-ma-sm q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Filter by topic",autofocus:""},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[s("q-btn",{attrs:{slot:"prepend",color:"grey-9",icon:"mdi-arrow-left",flat:"",round:""},on:{click:function(t){e.filterMode=!1,e.filter=""}},slot:"prepend"}),e.filter?s("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-close",flat:"",round:""},on:{click:function(t){e.filter=""}},slot:"append"}):e._e()],1):s("q-toolbar",{staticClass:"q-pr-none text-white bg-red-6"},[s("q-toolbar-title",[e._v("Unresolved messages")]),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-magnify"},on:{click:function(t){e.filterMode=!0}}}),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[s("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(t){return e.clearMessagesHandler(t)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),s("q-item-section",[s("q-item-label",[e._v("Clear messages")])],1)],1)],1)],1)],1)],1)],1),s("virtual-list",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:e.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"not-resolved-msgs__list",attrs:{size:110,remain:15,onscroll:e.listScroll}},e._l(e.filteredNotResolvedMessages,(function(e,t){return s("message",{key:"subNRMsg"+t,attrs:{message:e}})})),1)],1)],1)},Oe=[],Ee={name:"Unresolved",props:["messages"],data:function(){return{filter:"",needAutoScroll:!0,filterMode:!1}},computed:{filteredNotResolvedMessages:function(){var e=this;return this.messages.filter((function(t){return-1!==t.topic.indexOf(e.filter)}))}},methods:{listScroll:function(e,t){var s=this.$refs.scroller&&this.$refs.scroller.$el;if(!s)return!1;s.scrollTop<s.scrollHeight-s.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0},clearMessagesHandler:function(){this.$emit("clear")}},components:{VirtualList:ie.a,Message:fe},directives:{autoscroll:{inserted:function(e,t){var s=t.value;s&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var s=t.value;setTimeout((function(){s&&(e.scrollTop=e.scrollHeight-e.clientHeight)}),50)}}}},Ae=Ee,Te=(s("744b"),Object(V["a"])(Ae,Ie,Oe,!1,null,null,null)),Ne=Te.exports,He=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mqtt-client__logs col-xl-3 col-md-4 col-sm-6 col-xs-12"},[s("q-card",{staticClass:"logs__wrapper q-ma-sm",staticStyle:{overflow:"hidden"}},[s("q-card-section",{staticClass:"q-pa-none"},[s("q-toolbar",{staticClass:"q-pr-none text-white bg-blue"},[s("q-toolbar-title",[e._v("Logs")]),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[s("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(t){return e.clearLogsHandler(t)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),s("q-item-section",[s("q-item-label",[e._v("Clear logs")])],1)],1)],1)],1)],1)],1)],1),s("q-card-section",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:e.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"scroll q-pa-none",staticStyle:{height:"calc(100% - 50px)"},nativeOn:{scroll:function(t){return e.listScroll(t)}}},e._l(e.logs,(function(t,i){return s("q-card",{key:"log"+i,staticClass:"log__item q-ma-sm",class:["bg-"+e.getColor(t)+"-3"]},[s("div",{staticClass:"log__title q-py-xs q-px-sm text-bold"},[e._v("\n          "+e._s(t.type)+"\n        ")]),"offline"===t.type||"reconnect"===t.type||"end"===t.type?[s("div",{staticClass:"log__payload q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}})]:"disconnect"===t.type?[t.data?s("div",{staticClass:"log__payload q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[e._v("\n            disconnected by broker:\n            "),s("div",[e._v(e._s(t.data.reasonCode+": "+e.codes[t.data.reasonCode]))])]):e._e()]:"created"===t.type||"updated"===t.type?[s("div",{staticClass:"log__payload q-px-sm q-pt-xs q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[s("div",{staticClass:"q-ma-none",staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[s("json-tree",{attrs:{data:t.data}})],1)])]:"connect"===t.type?[e.codes[t.data.returnCode]||e.codes[t.data.reasonCode]?s("div",{staticClass:"log__payload q-px-sm q-py-xs q-mr-xs q-ml-xs bg-grey-2"},[e._v("\n            "+e._s(e.codes[t.data.returnCode]||e.codes[t.data.reasonCode])+"\n          ")]):e._e(),t.data.properties?s("div",{staticClass:"log__properties q-pt-xs q-mr-xs q-ml-xs text-grey-7 bg-green-1",staticStyle:{"font-size":".75rem","word-break":"break-all"}},[s("json-tree",{attrs:{data:t.data.properties}})],1):e._e()]:"error"===t.type?[s("div",{staticClass:"log__payload q-px-sm q-py-xs q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[s("div",{staticClass:"q-ma-none",staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[e._v(e._s(t.data.error.message))])])]:"subscribe"===t.type?[s("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2 row",staticStyle:{"font-size":".75rem"}},[t.data.restored?e._e():s("div",{staticClass:"col-6 q-pr-xs"},[s("div",{staticClass:"text-bold"},[e._v("Request")]),s("div",{staticStyle:{"word-break":"break-all"}},[s("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.settings.topic))]),s("div",[s("span",{staticClass:"text-bold"},[e._v("QoS: ")]),e._v(e._s(t.data.settings.options.qos))]),void 0!==t.data.settings.options.nl?s("div",[s("span",{staticClass:"text-bold"},[e._v("No Local: ")]),e._v(e._s(t.data.settings.options.nl))]):e._e(),void 0!==t.data.settings.options.rap?s("div",[s("span",{staticClass:"text-bold"},[e._v("Retain as Published: ")]),e._v(e._s(t.data.settings.options.rap))]):e._e(),void 0!==t.data.settings.options.rh?s("div",[s("span",{staticClass:"text-bold"},[e._v("Retain handling: ")]),e._v(e._s(t.data.settings.options.rh))]):e._e()]),t.data.grants[0]&&0===(128&t.data.grants[0].qos)?s("div",{staticClass:"col-6 q-pl-xs"},[t.data.restored?s("div",{staticClass:"col-6 q-pr-xs text-bold"},[e._v("Access (restored by broker)")]):s("div",{staticClass:"col-6 q-pr-xs text-bold"},[e._v("Access")]),s("div",{staticStyle:{"word-break":"break-all"}},[s("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.grants[0].topic))]),s("div",[s("span",{staticClass:"text-bold"},[e._v("QoS: ")]),e._v(e._s(t.data.grants[0].qos))]),void 0!==t.data.grants[0].nl?s("div",[s("span",{staticClass:"text-bold"},[e._v("No Local: ")]),e._v(e._s(t.data.grants[0].nl))]):e._e(),void 0!==t.data.grants[0].rap?s("div",[s("span",{staticClass:"text-bold"},[e._v("Retain as Published: ")]),e._v(e._s(t.data.grants[0].rap))]):e._e(),void 0!==t.data.grants[0].rh?s("div",[s("span",{staticClass:"text-bold"},[e._v("Retain handling: ")]),e._v(e._s(t.data.grants[0].rh))]):e._e()]):e._e(),t.data.grants[0]&&(128&t.data.grants[0].qos)>0?s("div",[s("div",{staticClass:"col-6 q-pr-xs text-bold"},[e._v("Error")]),s("div",{staticStyle:{"word-break":"break-all"}},[s("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.grants[0].topic))]),s("div",{staticStyle:{"word-break":"break-all"}},[s("span",{staticClass:"text-bold"},[e._v("Message: ")]),e._v(e._s(e.codes[t.data.grants[0].qos]))])]):e._e()])]:"unsubscribe"===t.type?[s("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[s("div",{staticStyle:{"word-break":"break-all"}},[s("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.topic))]),s("div",[s("span",{staticClass:"text-bold"},[e._v("QoS: ")]),e._v(e._s(t.data.options.qos))]),void 0!==t.data.options.nl?s("div",[s("span",{staticClass:"text-bold"},[e._v("No Local: ")]),e._v(e._s(t.data.options.nl))]):e._e(),void 0!==t.data.options.rap?s("div",[s("span",{staticClass:"text-bold"},[e._v("Retain as Published: ")]),e._v(e._s(t.data.options.rap))]):e._e(),void 0!==t.data.options.rh?s("div",[s("span",{staticClass:"text-bold"},[e._v("Retain handling: ")]),e._v(e._s(t.data.options.rh))]):e._e()])]:[s("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[s("div",{staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[e._v(e._s(t.data))])])],s("div",{staticClass:"log__timestamp q-py-xs q-px-sm text-grey-7"},[e._v(e._s(e.date.formatDate(t.timestamp,"DD/MM/YYYY HH:mm:ss")))])],2)})),1)],1)],1)},je=[],Le={name:"Logs",props:["logs"],data:function(){return{needAutoScroll:!0,colors:{connect:"green",error:"red",offline:"grey",reconnect:"yellow",subscribe:"orange",unsubscribe:"purple",disconnect:"red",end:"grey",created:"green",updated:"yellow"},date:oe["a"],codes:{0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"}}},methods:{getColor:function(e){return"connect"===e.type&&(this.codes[e.data.returnCode]||this.codes[e.data.reasonCode])?"red":"subscribe"===e.type&&e.data.restored?"blue":"subscribe"===e.type&&e.data.grants&&(128&e.data.grants[0].qos)>0?"red":"disconnect"===e.type&&e.data?"brown":this.colors[e.type]},listScroll:function(e){var t=this.$refs.scroller.$el;t.scrollTop<t.scrollHeight-t.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0},clearScrollParams:function(){this.currentScrollTop=0,this.allScrollTop=0,this.needAutoScroll=!0},clearLogsHandler:function(){this.$emit("clear")}},created:function(){var e=this;this.$nextTick((function(){if(e.needAutoScroll&&e.$refs.scroller){var t=e.$refs.scroller.$el;t.scrollTop=t.scrollHeight-t.clientHeight}}))},directives:{autoscroll:{inserted:function(e,t){var s=t.value;s&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var s=t.value;setTimeout((function(){s&&(e.scrollTop=e.scrollHeight-e.clientHeight)}),50)}}},components:{JsonTree:be}},ze=Le,Re=(s("3b81"),Object(V["a"])(ze,He,je,!1,null,null,null)),Fe=Re.exports,De=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{ref:"modal",attrs:{"content-class":"mqtt-board__popup",maximized:e.$q.platform.is.mobile},on:{show:function(t){return e.$emit("show")},hide:function(t){return e.$emit("hide")}}},[s("q-card",{style:{width:e.$q.platform.is.mobile?"100%":"50vw"}},[s("q-card-section",{staticClass:"q-pa-none"},[s("q-toolbar",{staticClass:"q-pr-none bg-indigo text-white"},[s("q-toolbar-title",[e._v("Publisher")]),s("q-btn",{attrs:{round:"",disable:!e.isValidPublisher,flat:"",icon:"mdi-send"},on:{click:function(t){e.$emit("publish",e.config),e.hide()}}},[s("q-tooltip",[e._v("Publish")])],1),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-close"},on:{click:e.hide}})],1)],1),s("q-separator"),s("q-card-section",{staticClass:"scroll q-pa-none",style:{height:e.$q.platform.is.mobile?"calc(100% - 50px)":"70vh"}},[s("div",{staticClass:"mqtt-client__publisher"},[s("div",{staticClass:"q-pa-md"},[s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Topic",error:!e.isValidPublisher},model:{value:e.config.topic,callback:function(t){e.$set(e.config,"topic",t)},expression:"config.topic"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",autogrow:"",type:"textarea q-textarea--fix",label:"Message"},model:{value:e.config.payload,callback:function(t){e.$set(e.config,"payload",t)},expression:"config.payload"}}),s("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{value:!0,label:"Options"}},[s("div",{staticClass:"q-pa-sm"},[s("div",{staticClass:"q-px-md q-py-sm"},[s("div",{staticClass:"q-mb-sm"},[e._v("\n                  QoS\n                  "),s("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.qos,callback:function(t){e.$set(e.config.options,"qos",t)},expression:"config.options.qos"}})],1)]),s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Retain"},model:{value:e.config.options.retain,callback:function(t){e.$set(e.config.options,"retain",t)},expression:"config.options.retain"}}),s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Duplicate flag"},model:{value:e.config.options.dup,callback:function(t){e.$set(e.config.options,"dup",t)},expression:"config.options.dup"}}),5===e.version?s("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{label:"Properties",value:!0}},[s("div",{staticClass:"q-px-md q-py-sm"},[s("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:e.config.options.properties.payloadFormatIndicator,callback:function(t){e.$set(e.config.options.properties,"payloadFormatIndicator",t)},expression:"config.options.properties.payloadFormatIndicator"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",clearable:"",outlined:"","hide-bottom-space":"",error:!e.isNil(e.config.options.properties.messageExpiryInterval)&&(e.config.options.properties.messageExpiryInterval<0||e.config.options.properties.messageExpiryInterval>4294967295)},on:{clear:function(t){e.config.options.properties.messageExpiryInterval=void 0}},model:{value:e.config.options.properties.messageExpiryInterval,callback:function(t){e.$set(e.config.options.properties,"messageExpiryInterval",e._n(t))},expression:"config.options.properties.messageExpiryInterval"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias",clearable:"",outlined:"","hide-bottom-space":"",error:!e.isNil(e.config.options.properties.topicAlias)&&(e.config.options.properties.topicAlias<=0||e.config.options.properties.topicAlias>65535)},on:{clear:function(t){e.config.options.properties.topicAlias=void 0}},model:{value:e.config.options.properties.topicAlias,callback:function(t){e.$set(e.config.options.properties,"topicAlias",e._n(t))},expression:"config.options.properties.topicAlias"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:e.config.options.properties.responseTopic,callback:function(t){e.$set(e.config.options.properties,"responseTopic",t)},expression:"config.options.properties.responseTopic"}}),s("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",autogrow:"",label:"Correlation data",outlined:"","hide-bottom-space":""},model:{value:e.config.options.properties.correlationData,callback:function(t){e.$set(e.config.options.properties,"correlationData",t)},expression:"config.options.properties.correlationData"}}),s("div",{staticClass:"q-mb-sm"},[s("div",{staticClass:"q-mt-md"},[e._v("User Properties")]),s("div",[e.config.options.properties.userProperties?s("q-list",{staticClass:"q-mb-xs"},e._l(e.config.options.properties.userProperties,(function(t,i){return s("q-item",{key:i+": "+t,staticStyle:{"min-height":"17px"}},[s("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removePublishUserProperty(i)}}}),s("span",[e._v(e._s(i+": "+t))])],1)})),1):e._e(),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:e.publishUserProperty.name,callback:function(t){e.$set(e.publishUserProperty,"name",t)},expression:"publishUserProperty.name"}}),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:e.publishUserProperty.value,callback:function(t){e.$set(e.publishUserProperty,"value",t)},expression:"publishUserProperty.value"}}),s("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.publishUserProperty.name||!e.publishUserProperty.value,color:"grey-9"},on:{click:function(t){return e.addPublishUserProperty()}}},[e._v("Add")])],1)]),s("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Content type"},model:{value:e.config.options.properties.contentType,callback:function(t){e.$set(e.config.options.properties,"contentType",t)},expression:"config.options.properties.contentType"}})],1)]):e._e()],1)])],1)])])],1)],1)},Be=[],Ve={name:"PublisherModal",props:["message","version"],data:function(){return{config:{topic:this.message.topic,payload:JSON.stringify(this.message.payload),options:{qos:this.message.qos,retain:this.message.retain,dup:this.message.dup,properties:k()(this.message.properties)}},publishUserProperty:{value:"",name:""}}},computed:{isValidPublisher:function(){return!!this.config.topic&&this.validateTopic(this.config.topic)&&(4===this.version||5===this.version&&($()(this.config.options.properties.messageExpiryInterval)||this.config.options.properties.messageExpiryInterval>=0&&this.config.options.properties.messageExpiryInterval<=4294967295)&&($()(this.config.options.properties.topicAlias)||this.config.options.properties.topicAlias>0&&this.config.options.properties.topicAlias<=65535))}},methods:{isNil:$.a,addPublishUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{});var e=this.config.options.properties.userProperties;e[this.publishUserProperty.name]?Array.isArray(e[this.publishUserProperty.name])?e[this.publishUserProperty.name].push(this.publishUserProperty.value):this.$set(e,this.publishUserProperty.name,[e[this.publishUserProperty.name],this.publishUserProperty.value]):this.$set(e,this.publishUserProperty.name,this.publishUserProperty.value),this.publishUserProperty={value:"",name:""}},removePublishUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",null)},show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()}},mixins:[ve]},We=Ve,Je=(s("0a8d"),Object(V["a"])(We,De,Be,!1,null,null,null)),Qe=Je.exports,Ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v("Panes")]),s("div",{staticClass:"scroll absolute full-width",staticStyle:{height:"calc(100% - 48px)"}},e._l(e.entities,(function(t,i){return s("q-item",{key:t.type+"-"+t.id,staticClass:"q-ma-xs rounded-borders",class:["bg-"+(t.rendered?e.colorByType[t.type]+"-6":"grey-13")],staticStyle:{overflow:"hidden"},attrs:{active:t.rendered,clickable:""},on:{click:function(s){return e.$emit(t.rendered?"hide":"show",i)}}},[s("div",{staticClass:"absolute-top-left absolute-bottom-left",class:["bg-"+e.colorByType[t.type]+"-6"],staticStyle:{width:"10px"}}),s("q-item-section",[s("q-item-label",{staticClass:"q-pa-none text-bold",class:["text-"+(t.rendered?"white":e.colorByType[t.type]+"-10")],attrs:{header:""}},[e._v(e._s(e.labelByType[t.type]))]),"subscriber"===t.type||"publisher"===t.type?s("q-item-label",{staticClass:"ellipsis",class:["text-"+(t.rendered?"grey-2":e.colorByType[t.type]+"-10")],attrs:{caption:""}},[e._v(e._s(t.settings.topic))]):e._e(),"publisher"===t.type?s("q-item-label",{staticClass:"ellipsis",class:["text-"+(t.rendered?"grey-2":e.colorByType[t.type]+"-10")],attrs:{caption:""}},[s("small",[e._v(e._s(t.settings.payload))])]):e._e()],1),"subscriber"===t.type||"publisher"===t.type?s("q-item-section",{attrs:{side:""}},["publisher"===t.type?s("q-btn",{attrs:{dense:"",outline:"",color:"white",disable:!e.isValidPublisher(t.settings),icon:"mdi-send"},on:{click:function(s){return s.stopPropagation(),e.$emit("publish",t.settings)}}},[s("q-tooltip",[e._v("Publish")])],1):e._e(),"subscriber"===t.type?s("q-btn",{attrs:{dense:"",outline:"",color:"white",disable:!e.isValidSubscriber(t.settings),icon:t.status?"mdi-stop":"mdi-play"},on:{click:function(s){return s.stopPropagation(),e.$emit(t.status?"subscriber:stop":"subscriber:play",t.index)}}},[s("q-tooltip",[e._v(e._s(t.status?"Stop":"Subscribe"))])],1):e._e()],1):e._e()],1)})),1)],1)},Ke=[],Ge={props:["entities"],data:function(){return{colorByType:{subscriber:"orange",publisher:"indigo",logs:"blue",unresolved:"red"},labelByType:{subscriber:"Subscriber",publisher:"Publisher",logs:"Logs",unresolved:"Unresolved"}}},methods:{isValidPublisher:function(e){return!!e.topic&&this.validateTopic(e.topic)&&($()(e.options.properties.messageExpiryInterval)||e.options.properties.messageExpiryInterval>=0&&e.options.properties.messageExpiryInterval<=4294967295)&&($()(e.options.properties.topicAlias)||e.options.properties.topicAlias>0&&e.options.properties.topicAlias<=65535)},isValidSubscriber:function(e){return!!e.topic&&this.validateTopic(e.topic)&&($()(e.options.properties.subscriptionIdentifier)||e.options.properties.subscriptionIdentifier>0&&e.options.properties.subscriptionIdentifier<=268435455)}},mixins:[ve]},Xe=Ge,Ze=Object(V["a"])(Xe,Ye,Ke,!1,null,null,null),et=Ze.exports,tt=s("9224"),st=s("8993"),it=s.n(st),rt={publisher:{topic:"string",payload:"string",options:{qos:"number",retain:"boolean",dup:"boolean",properties:{payloadFormatIndicator:"boolean",messageExpiryInterval:"number",topicAlias:"number",responseTopic:"string",correlationData:"string",userProperties:{},contentType:"string"}}},subscriber:{topic:"string",mode:"number",options:{qos:"number",nl:"boolean",rap:"boolean",rh:"number",properties:{subscriptionIdentifier:"number",userProperties:{}}}},settings:{clientId:"string",host:"string",keepalive:"number",protocolVersion:"number",clean:"boolean",username:"string",password:"string",properties:{sessionExpiryInterval:"number",receiveMaximum:"number",maximumPacketSize:"number",topicAliasMaximum:"number",requestResponseInformation:"boolean",requestProblemInformation:"boolean",userProperties:{},authenticationMethod:"string",authenticationData:"string"},will:{topic:"string",payload:"string",qos:"number",retain:"boolean",properties:{willDelayInterval:"number",payloadFormatIndicator:"boolean",messageExpiryInterval:"number",contentType:"string",responseTopic:"string",correlationData:"string",userProperties:{}}}},entity:{type:"string",index:"number",id:"string"}},nt={methods:{validateObjectBySchema:function(e,t){var s=this;return Object.keys(t).reduce((function(i,r){if(void 0!==e[r]&&null!==e[r]){var n=it()(e[r]);i="object"===it()(t[r])?i&&s.validateObjectBySchema(e[r],t[r]):n===t[r]?i&&!0:i&&!1}return i}),!0)},validateEntity:function(e){switch(e.type){case"publisher":return this.validatePublisher(e.settings);case"subscriber":return this.validateSubscriber(e.settings);default:return!1}},validateSettings:function(e){return this.validateObjectBySchema(e,rt.settings)&&!!e.clientId&&!!e.host&&($()(e.keepalive)||e.keepalive>=0&&e.keepalive<=65535)&&(!e.will||!!e.will&&(!!e.will.topic&&!!e.will.payload||!e.will.topic&&!e.will.payload))&&(!e.properties||!!e.properties&&($()(e.properties.sessionExpiryInterval)||e.properties.sessionExpiryInterval>=0&&e.properties.sessionExpiryInterval<=4294967295)&&($()(e.properties.receiveMaximum)||e.properties.receiveMaximum>0&&e.properties.receiveMaximum<=65535)&&($()(e.properties.maximumPacketSize)||e.properties.maximumPacketSize>0&&e.properties.maximumPacketSize<=4294967295)&&($()(e.properties.topicAliasMaximum)||e.properties.topicAliasMaximum>=0&&e.properties.topicAliasMaximum<=65535))},validatePublisher:function(e){return this.validateObjectBySchema(e,rt.publisher)&&!!e.topic&&!!e.options&&(!e.options.properties||!!e.options.properties&&($()(e.options.properties.messageExpiryInterval)||e.options.properties.messageExpiryInterval>=0&&e.options.properties.messageExpiryInterval<=4294967295)&&($()(e.options.properties.topicAlias)||e.options.properties.topicAlias>0&&e.options.properties.topicAlias<=65535))},validateSubscriber:function(e){return this.validateObjectBySchema(e,rt.subscriber)&&!!e.topic&&!!e.options&&(!e.options.properties||!!e.options.properties&&($()(e.options.properties.subscriptionIdentifier)||e.options.properties.subscriptionIdentifier>0&&e.options.properties.subscriptionIdentifier<=268435455))},validateEntityRecord:function(e){return this.validateObjectBySchema(e,rt.entity)}}},ot={clientId:"mqtt-board-".concat(Math.random().toString(16).substr(2,8)),wsOptions:{objectMode:!1,perMessageDeflate:!0},host:"ws://218.156.90.183",keepalive:420,protocolVersion:5,resubscribe:!1,clean:!0,username:"ral",password:"ral",properties:{sessionExpiryInterval:void 0,receiveMaximum:void 0,maximumPacketSize:void 0,topicAliasMaximum:void 0,requestResponseInformation:!1,requestProblemInformation:!1,userProperties:void 0,authenticationMethod:void 0,authenticationData:void 0},will:{topic:void 0,payload:void 0,qos:0,retain:!1,properties:{willDelayInterval:void 0,payloadFormatIndicator:!1,messageExpiryInterval:void 0,contentType:void 0,responseTopic:void 0,correlationData:void 0,userProperties:void 0}}},at={topic:"#",mode:0,treeField:"",highlight:!0,options:{qos:0,nl:!1,rap:!1,rh:0,properties:{subscriptionIdentifier:void 0,userProperties:void 0}},unsubscribeProperties:{userProperties:void 0}},lt={topic:"my/topic",payload:'{"hello": "world"}',options:{qos:0,retain:!1,dup:!1,properties:{payloadFormatIndicator:void 0,messageExpiryInterval:void 0,topicAlias:void 0,responseTopic:void 0,correlationData:void 0,userProperties:void 0,contentType:void 0}}},ct=s("2b0e");function pt(e,t,s){function i(e,s,i){var r=e.split("/"),n=i,o="";r.forEach((function(e,i,r){if(n[e]||ct["default"].set(n,e,{children:void 0,topic:"",value:void 0}),0!==i&&(o+="/"),o+="".concat(e),ct["default"].set(n[e],"topic",o),i!==r.length-1)n[e].children||ct["default"].set(n[e],"children",{}),n=n[e].children;else{n[e].value||ct["default"].set(n[e],"value",{});var a=s.properties&&s.properties.userProperties&&s.properties.userProperties[t]?s.properties.userProperties[t]:"";ct["default"].set(n[e].value,a,JSON.stringify(s))}}))}function r(e,s,i){function r(e,t){var s=new Array(t.length).fill(void 0);return s[0]=e,t.reduce((function(e,t,i,r){var n={container:s[i]||null,name:t};return s[i+1]=n.container&&n.container[t]?n.container[t].children:null,n}),{container:e,name:t[0]})}var n=e.split("/");new Array(n.length).fill("").forEach((function(e,o){var a=n.length-o,l=n.slice(0,a),c=r(i,l);if(!c.container||!c.container[c.name])return!1;var p=c.container[c.name],u=p.children&&!!Object.keys(p.children).length;if(p.value&&0===o){var d=s.properties&&s.properties.userProperties&&s.properties.userProperties[t]?s.properties.userProperties[t]:"";ct["default"].delete(p.value,d),Object.keys(p.value).length||ct["default"].set(p,"value",void 0)}u||(ct["default"].set(p,"children",void 0),p.value||ct["default"].delete(c.container,c.name))}))}function n(e){return"string"!==typeof e.payload||e.payload.length?i:r}Array.isArray(e)?e.forEach((function(e){n(e)(e.topic,e,s)})):n(e)(e.topic,e,s)}var ut=pt;function dt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function bt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(s),!0).forEach((function(t){m()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mt(e,t){var s;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=gt(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==s.return||s.return()}finally{if(a)throw n}}}}function gt(e,t){if(e){if("string"===typeof e)return ht(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ht(e,t):void 0}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}var ft=function(e){return Object.keys(e).map((function(t){var s=e[t];return{status:s.status,config:s.config,publishers:s.publishers,subscribers:s.subscribers,entities:s.entities.filter((function(e){return"unresolved"!==e.type})),subscribersStatuses:s.subscribersStatuses,subscribersConnectivityStatuses:s.subscribersConnectivityStatuses}}))},vt=O()((function(e){E["a"].set(yt,ft(e))}),500,{trailing:!0}),yt="clients",qt=!0,xt=!1,St=null,Ct={name:"MqttClient",props:{initSettings:{type:Object},whiteLabel:{type:String,default:""},useLocalStorage:{type:Boolean,default:!0},needInitNewClient:{type:Boolean,default:!1},secure:{type:Boolean,default:!0},color:{type:String,default:"grey-9"},accentColor:{type:String,default:"light-blue-7"},initEntities:{type:Array,default:function(){return[{type:"subscriber",rendered:!0,settings:k()(at)},{type:"publisher",settings:k()(lt),rendered:!0}]},validator:function(e){return e.reduce((function(e,t,s){return nt.methods.validateEntity(t)?e&&!0:e&&!1}),!0)}},configuredClients:{type:Array,default:function(){return[]},validator:function(e){var t=!0;return e.forEach((function(e){if(!e.config||!e.entities||!e.publishers||!e.subscribers)return t=!1,!1;t=t&&nt.methods.validateSettings(e.config),e.entities.forEach((function(e){t=t&&nt.methods.validateEntityRecord(e)})),e.publishers.forEach((function(e){t=t&&nt.methods.validatePublisher(e)})),e.subscribers.forEach((function(e){t=t&&nt.methods.validateSubscriber(e)}))})),t}}},data:function(){return{version:tt["a"],drawerRight:!0,currentSettings:k()(_()({},ot,this.initSettings)),prevSettings:null,clients:{},statuses:{},activeClient:null,entities:[],publishers:[],subscribers:[],subscribersStatuses:[!1],subscribersConnectivityStatuses:[!1],subscribersMessages:[[]],subscribersMessagesBuffer:[[]],connectUserProperty:{value:"",name:""},willConnectUserProperty:{value:"",name:""},settingsModalModel:!1,activeClientSettings:null,renderInterval:0,messagesLimitCount:3e3,notResolvedMessages:[],isNeedScroll:!1,isInited:!1,republishMessage:null}},computed:{isCurrentSettingsValid:function(){return this.validateSettings(this.currentSettings)},renderedEntities:function(){var e,t=[],s=mt(this.entities);try{for(s.s();!(e=s.n()).done;){var i=e.value;(i.rendered||void 0===i.rendered)&&t.push(i)}}catch(r){s.e(r)}finally{s.f()}return t},menuEnitites:function(){var e,t=[],s=mt(this.entities);try{for(s.s();!(e=s.n()).done;){var i=e.value,r=bt({},i);"subscriber"===i.type?(r.settings=this.subscribers[i.index],r.status=this.subscribersStatuses[i.index]):"publisher"===i.type&&(r.settings=this.publishers[i.index]),t.push(r)}}catch(n){s.e(n)}finally{s.f()}return t},colsCountClass:function(){return"col-xl-".concat(this.entities.length<4?12/this.entities.length:4)}},methods:{isNil:$.a,openURL:A["a"],showSettingsModalHandler:function(){this.prevSettings=k()(this.currentSettings)},revertSettings:function(){this.clearCurrentSettings(),this.prevSettings=null},clearCurrentSettings:function(){this.currentSettings=k()(_()({},ot,this.initSettings)),this.currentSettings.clientId="mqtt-board-".concat(Math.random().toString(16).substr(2,8)),this.activeClientSettings=null},saveSettingsHandler:function(){this.prevSettings=null,this.createClient(this.activeClientSettings),this.settingsModalModel=!1},addUserProperty:function(){this.currentSettings.properties.userProperties||(this.currentSettings.properties.userProperties={}),this.currentSettings.properties.userProperties[this.connectUserProperty.name]=this.connectUserProperty.value,this.connectUserProperty={value:"",name:""}},addWillUserProperty:function(){this.currentSettings.will.properties.userProperties||(this.currentSettings.will.properties.userProperties={}),this.currentSettings.will.properties.userProperties[this.willConnectUserProperty.name]=this.willConnectUserProperty.value,this.willConnectUserProperty={value:"",name:""}},removeConnectUserProperty:function(e){this.$delete(this.currentSettings.properties.userProperties,e),Object.keys(this.currentSettings.properties.userProperties).length||(this.currentSettings.properties.userProperties=null)},removeWillConnectUserProperty:function(e){this.$delete(this.currentSettings.will.properties.userProperties,e),Object.keys(this.currentSettings.will.properties.userProperties).length||(this.currentSettings.will.properties.userProperties=null)},clearObject:function(e){var t=this;return Object.keys(e).reduce((function(s,i){var r=e[i];return r instanceof Object&&!Array.isArray(r)&&(r=t.clearObject(r),Object.keys(r).length||(r=void 0)),void 0!==r&&null!==r&&(s[i]=r),s}),{})},resolveSubscription:function(e,t){var s=U()(t,"options.properties.subscriptionIdentifier",void 0),i=U()(e,"properties.subscriptionIdentifier",void 0);return i&&s?!!("number"===typeof i&&i===s||Array.isArray(i)&&i.includes(s)):!!this.resolveTopics(e.topic,t.topic)},resolveSubscriptions:function(e,t,s){var i=this;return t.reduce((function(t,r,n){return s[n]&&i.resolveSubscription(e,r)&&t.push(n),t}),[])},getSharedTopicFilter:function(e){return e.replace(/^\$share\/[^/]+\//,"")},resolveTopics:function(e,t){0===t.indexOf("$share")&&(t=this.getSharedTopicFilter(t));var s=t.split("/"),i=e.split("/");return(i.length===s.length||"#"===s[s.length-1])&&s.reduce((function(e,t,s){return"#"===t||"+"===t?e&&!0:e&&t===i[s]}),!0)},errorHandler:function(e,t,s){var i=this.clients[e];i.logs.push({type:"error",data:{error:t},timestamp:Date.now()}),s&&this.showError(t)},showError:function(e){this.$q.notify({message:'<div class="text-center" style="font-size: 1.2rem;">'.concat(e.message,"</div>"),html:!0,color:"negative",icon:"mdi-alert-outline",timeout:2e3})},saveClients:function(){if(!this.isInited)return!1;this.$emit("change",ft(this.clients)),this.useLocalStorage&&vt(this.clients)},createConnectPacket:function(e){return e=this.clearObject(e),5!==e.protocolVersion&&(delete e.properties,e.will&&delete e.will.properties),!e.will||e.will.topic||e.will.payload||delete e.will,e},setClientStatus:function(e,t){return!!this.clients[e]&&(!(this.clients[e].status===St&&!t)&&(this.$set(this.statuses,e,t),void this.$set(this.clients[e],"status",t)))},messageProcessing:function(e,t){var s=this;e.payload=e.payload.toString();try{e.payload=JSON.parse(e.payload)}catch(o){}var i=this.clients[t];if(i.subscribersStatuses.length&&i.subscribersStatuses.filter((function(e){return!!e})).length){var r=this.resolveSubscriptions(e,i.subscribers,i.subscribersStatuses),n=!!r.length;n?r.forEach((function(t){!0===i.subscribersStatuses[t]?i.subscribersMessagesBuffer[t].push(e):"paused"===i.subscribersStatuses[t]&&(void 0===i.subscribers[t].missedMessages&&(i.subscribers[t].missedMessages=0),i.subscribers[t].missedMessages++)})):(i.notResolvedFlagInit||(this.$set(i,"notResolvedFlagInit",!0),this.entities.push({type:"unresolved",rendered:!1})),i.notResolvedMessages.push(e))}else i.subscribers.filter((function(t,r){s.resolveSubscription(e,t)&&!i.subscribersConnectivityStatuses[r]&&(i.notResolvedFlagInit||(s.$set(i,"notResolvedFlagInit",!0),s.entities.push({type:"unresolved",rendered:!1})),i.notResolvedMessages.push(e))}))},initClient:function(e,t){var s=this,i=this.clients[e],r=function(){s.setClientStatus(e,xt)},n=S.connect(t.host,t);n.on("connect",(function(t){var r=i.subscribersStatuses,n=i.subscribers,o=t.properties&&t.properties.userProperties&&t.properties.userProperties.subscriptions?JSON.parse(t.properties.userProperties.subscriptions):[];n.forEach((function(t,n){var a=r[n],l=o.findIndex((function(e){return e.topic===t.topic})),c=-1!==l;if(c&&!a)s.$set(r,n,!0);else if(!c&&a){if(0===t.mode)i.messages[n].splice(0,i.messages[n].length);else{var p=i.messages[n],u=Object.keys(p);u.forEach((function(e){s.$delete(p,e)}))}i.subscribersMessagesBuffer[n]=[],s.subscribe(e,n)}c&&o.splice(l,1)})),o.forEach((function(t){s.addSubscriber(e);var o=n.length-1,a=n[o],l={nl:t.no_local,rap:t.rap,rh:t.retain_handling,qos:t.qos,properties:{}};t.subscription_id&&(l.subscriptionIdentifier=t.subscription_id),s.$set(a,"options",l),s.$set(a,"topic",t.topic),s.$set(r,o,!0);var c=[{nl:t.no_local,rap:t.rap,rh:t.retain_handling,qos:t.qos,topic:t.topic}];s.$nextTick((function(){i.logs.push({type:"subscribe",data:{grants:c,restored:!0},timestamp:Date.now()})}))}))})),n.on("connect",(function(){s.setClientStatus(e,qt)})),n.on("connect",(function(e){i.logs.push({type:"connect",data:bt({},e),timestamp:Date.now()})})),n.once("connect",(function(t){s.$set(i,"cid",s.getCid(t)),s.$set(i,"inited",!0),s.activateRender();var r=[];i.processTimer=setInterval((function(){r.forEach((function(t){s.messageProcessing(t,e)})),r=[]}),500),n.on("message",(function(e,t,s){r.push(s)}))})),n.on("error",(function(t){s.errorHandler(e,t,!1)})),n.on("disconnect",(function(e){143===e.reasonCode&&i.subscribersStatuses.forEach((function(e,t){e&&(s.$delete(i.client._client._resubscribeTopics,i.subscribers[t].topic),s.$set(i.subscribersStatuses,t,!1),s.$set(i.subscribersConnectivityStatuses,t,!1))})),i.logs.push({type:"disconnect",data:bt({},e),timestamp:Date.now()}),r()})),n.on("close",(function(){i.logs.push({type:"disconnect",timestamp:Date.now()}),r()})),n.on("offline",(function(){s.$set(i,"inited",!1),i.logs.push({type:"offline",timestamp:Date.now()}),r()})),n.on("end",(function(){i.logs.push({type:"end",timestamp:Date.now()}),r()})),n.on("reconnect",(function(){s.$set(i,"inited",!0),i.logs.push({type:"reconnect",timestamp:Date.now()})})),this.$set(this.clients[e],"client",n)},createClient:function(e){var t=this;return d()(p.a.mark((function s(){var i,r,n,o,a;return p.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:i=t.createConnectPacket(t.currentSettings),r="string"===typeof e||"number"===typeof e,n=r?e:Object.keys(t.clients).reduce((function(e,t){return e>parseInt(t)?e:parseInt(t)}),-1)+1,t.clients[n]?(a=t.clients[n],a.client&&(a.processTimer&&clearInterval(a.processTimer),t.destroyClient(a.client),t.setClientStatus(n,xt)),a.logs.push({type:"updated",data:bt({},i),timestamp:Date.now()})):(o={},o.id=n,o.status=!1,t.createInitEntities(o),o.logs=[{type:"created",data:bt({},i),timestamp:Date.now()}],o.notResolvedMessages=[],t.clients[n]=o),t.statuses[n]!==St&&t.initClient(n,i),t.$set(t.clients[n],"config",i),t.saveClients(),t.clearCurrentSettings();case 6:case"end":return s.stop()}}),s)})))()},initExternalClients:function(e){var t=this;e&&e.forEach((function(e){var s=Object.keys(t.clients).length,i={};i.config=e.config,i.id=s,i.client=null,i.status=e.status,i.publishers=e.publishers,i.subscribers=e.subscribers,i.entities=e.entities.map((function(e,t){return void 0===e.rendered&&(e.rendered=!0),e})),"logs"!==i.entities[0].type&&i.entities.unshift({type:"logs",rendered:!0}),i.messages=new Array(e.subscribers.length),i.subscribersMessagesBuffer=new Array(e.subscribers.length);for(var r=0;r<e.subscribers.length;r++)i.messages[r]=e.subscribers[r].mode?{}:[],i.subscribersMessagesBuffer[r]=[];e.subscribersStatuses?i.subscribersStatuses=e.subscribersStatuses:(i.subscribersStatuses=new Array(e.subscribers.length),i.subscribersStatuses.fill(!1)),e.subscribersConnectivityStatuses?i.subscribersConnectivityStatuses=e.subscribersConnectivityStatuses:(i.subscribersConnectivityStatuses=new Array(e.subscribers.length),i.subscribersConnectivityStatuses.fill(!1)),i.logs=[{type:"created",data:bt({},e.config),timestamp:Date.now()}],i.notResolvedMessages=[],t.$set(t.statuses,s,e.status),t.$set(t.clients,s,i),e.status!==St&&t.initClient(s,t.createConnectPacket(e.config))}))},createInitEntities:function(e){var t=this,s=this.initEntities;e.subscribers=[],e.publishers=[],e.entities=[],e.messages=[],e.subscribersMessagesBuffer=[],e.subscribersStatuses=[],e.subscribersConnectivityStatuses=[],e.entities.push({type:"logs",rendered:!0}),s.forEach((function(s,i){switch(s.type){case"subscriber":e.subscribers.push(k()(_()({},at,s.settings))),e.messages.push(s.settings.mode?{}:[]),e.subscribersMessagesBuffer.push([]),e.subscribersStatuses.push(!1),e.subscribersConnectivityStatuses.push(!1),e.entities.push({type:"subscriber",rendered:!0,index:e.subscribers.length-1,id:Math.random().toString(16).substr(2,8)});break;case"publisher":e.publishers.push(k()(_()({},lt,s.settings))),e.entities.push({type:"publisher",rendered:!0,index:e.publishers.length-1,id:Math.random().toString(16).substr(2,8)});break;default:t.showError(new Error("Unknown type of entity: ".concat(s.type)))}}))},addClientHandler:function(){this.settingsModalModel=!0},editClientHandler:function(e){this.currentSettings=k()(_()({},ot,this.clients[e].config)),this.activeClientSettings=e,this.settingsModalModel=!0},connectClientHandler:function(e){var t=this.clients[e];t.client&&(t.processTimer&&clearInterval(t.processTimer),this.destroyClient(t.client),this.setClientStatus(e,xt)),this.initClient(e,t.config),this.saveClients()},destroyClient:function(e){return e.removeAllListeners(["reconnect","end","offline","close","disconnect","error","message","connect"]),e.end(!0)},disconnectClientHandler:function(e){var t=this;return d()(p.a.mark((function s(){var i;return p.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.clients[e],i.processTimer&&clearInterval(i.processTimer),t.setClientStatus(e,St),s.next=5,t.destroyClient(i.client);case 5:i.client=null,t.saveClients();case 7:case"end":return s.stop()}}),s)})))()},deleteClientHandler:function(e){var t=this,s=this.clients[e];this.$q.dialog({title:"Confirm",message:"Do you really want to delete client for ".concat(s.config.clientId,"?"),cancel:!0,ok:!0}).onOk((function(){s.processTimer&&clearInterval(s.processTimer),s.client?t.destroyClient(s.client).then((function(){t.$delete(t.statuses,e),t.$delete(t.clients,e),t.saveClients()})):(t.$delete(t.statuses,e),t.$delete(t.clients,e),t.saveClients())})).onCancel((function(){}))},activateRender:function(){var e=this;this.renderInterval||(this.renderInterval=setInterval((function(){Object.values(e.clients).forEach((function(t){t.subscribersMessagesBuffer.forEach((function(s,i){if(!s.length)return!1;var r=t.subscribers[i],n=t.messages[i];0===r.mode?(n&&(s=s.splice(-e.messagesLimitCount),n.splice.apply(n,[n.length,0].concat(l()(s))),n.splice(0,n.length-e.messagesLimitCount)),t.subscribersMessagesBuffer[i]=[]):t.subscribersStatuses[i]&&t.subscribersConnectivityStatuses[i]&&(ut(s,5===t.config.protocolVersion&&r.treeField?r.treeField:"",n),t.subscribersMessagesBuffer[i]=[])}))}))}),500))},setActiveClient:function(e){var t=this.clients[e];this.entities=t.entities,this.subscribers=t.subscribers,this.publishers=t.publishers,this.subscribersMessages=t.messages,this.subscribersMessagesBuffer=t.subscribersMessagesBuffer,this.notResolvedMessages=t.notResolvedMessages,this.subscribersStatuses=t.subscribersStatuses,this.subscribersConnectivityStatuses=t.subscribersConnectivityStatuses,this.activeClient=t},clearActiveClient:function(){this.activeClient=null,this.entities=[],this.subscribers=[],this.publishers=[],this.subscribersMessagesBuffer=[],this.notResolvedMessages=[],this.subscribersStatuses=[],this.subscribersConnectivityStatuses=[]},findEntity:function(e){return this.entities.findIndex((function(t){return e.type===t.type&&e.index===t.index}))},addPublisher:function(){this.publishers.push(k()(lt));var e={type:"publisher",rendered:!0,index:this.publishers.length-1,id:Math.random().toString(16).substr(2,8)};this.activeClient.notResolvedFlagInit?this.entities.splice(-1,0,e):this.entities.push(e),this.saveClients(),this.isNeedScroll=!0},addSubscriber:function(e){e="number"===typeof e||"string"===typeof e?e:this.activeClient.id;var t=this.clients[e];t.subscribers.push(k()(at)),t.messages.push([]),t.subscribersMessagesBuffer.push([]),t.subscribersStatuses.push(!1),t.subscribersConnectivityStatuses.push(!1);var s={type:"subscriber",rendered:!0,index:t.subscribers.length-1,id:Math.random().toString(16).substr(2,8)};this.activeClient.notResolvedFlagInit?this.entities.splice(-1,0,s):t.entities.push(s),this.saveClients(),this.activeClient&&(this.isNeedScroll=!0)},removePublisher:function(e){this.publishers.splice(e,1),this.entities.splice(this.findEntity({type:"publisher",index:e}),1),this.entities.forEach((function(t){"publisher"===t.type&&t.index>e&&t.index--})),this.saveClients()},removeSubscriber:function(e){var t=this;return d()(p.a.mark((function s(){var i;return p.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(i=t.subscribersStatuses[e],!i){s.next=4;break}return s.next=4,t.unsubscribeMessageHandler(t.activeClient.id,e);case 4:t.subscribers.splice(e,1),t.clients[t.activeClient.id].subscribersStatuses.splice(e,1),t.subscribersConnectivityStatuses.splice(e,1),t.subscribersMessages.splice(e,1),t.entities.splice(t.findEntity({type:"subscriber",index:e}),1),t.entities.forEach((function(t){"subscriber"===t.type&&t.index>e&&t.index--})),t.saveClients();case 11:case"end":return s.stop()}}),s)})))()},inputSubscriber:function(e,t){this.$set(this.subscribers,e,t),this.saveClients()},inputPublisher:function(e,t){this.$set(this.publishers,e,t),this.saveClients()},publishMessageHandler:function(e,t){var s=this;return d()(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.publishFreeMessage(s.publishers[t]);case 2:case"end":return e.stop()}}),e)})))()},publishFreeMessage:function(e){var t=this;return d()(p.a.mark((function s(){return p.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=t.clearObject(e),s.prev=1,s.next=4,t.activeClient.client.publish(e.topic,e.payload,e.options);case 4:t.$q.notify({message:'<div class="text-center" style="font-size: 1.2rem;">Published successfuly in topic '.concat(e.topic,"</div>"),html:!0,color:"positive",timeout:700}),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](1),t.activeClient.status?t.errorHandler(t.activeClient.id,s.t0,!0):t.errorHandler(t.activeClient.id,new Error("Client disconnected"),!0);case 10:case"end":return s.stop()}}),s,null,[[1,7]])})))()},subscribeMessageHandler:function(e,t){var s=this;return d()(p.a.mark((function i(){var r;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=s.clearObject(s.subscribers[t]),!s.subscribers.reduce((function(e,t,i){return s.subscribersStatuses[i]&&e.push(t.topic),e}),[]).filter((function(e){return e===r.topic||r.topic===s.getSharedTopicFilter(e)||e===s.getSharedTopicFilter(r.topic)})).length){i.next=4;break}return s.showError(new Error("You have another subscription with same topic")),i.abrupt("return",!1);case 4:return s.subscribersMessages&&s.subscribersMessages.length&&s.$set(s.subscribersMessages,t,1===r.mode?{}:[]),i.next=7,s.subscribe(e,t);case 7:case"end":return i.stop()}}),i)})))()},subscribe:function(e,t){var s=this;return d()(p.a.mark((function i(){var r,n,o;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=s.clients[e],n=s.clearObject(r.subscribers[t]),i.prev=1,s.$set(s.clients[e].subscribersStatuses,t,!0),s.$set(s.clients[e].subscribersConnectivityStatuses,t,!1),i.next=6,r.client.subscribe(n.topic,n.options);case 6:if(o=i.sent,s.$set(s.clients[e].subscribersConnectivityStatuses,t,!0),!o.length){i.next=12;break}if(r.logs.push({type:"subscribe",data:{settings:n,grants:o},timestamp:Date.now()}),!((128&o[0].qos)>0)){i.next=12;break}throw new Error("Subscription error ".concat(o[0].qos));case 12:i.next=19;break;case 14:i.prev=14,i.t0=i["catch"](1),s.$set(s.clients[e].subscribersStatuses,t,!1),s.$set(s.clients[e].subscribersConnectivityStatuses,t,!1),r.status?s.errorHandler(e,i.t0,!0):s.errorHandler(e,new Error("Client disconnected"),!0);case 19:s.saveClients();case 20:case"end":return i.stop()}}),i,null,[[1,14]])})))()},playSubscriberHandler:function(e){this.$set(this.subscribers[e],"missedMessages",void 0),this.$set(this.subscribersStatuses,e,!0)},pauseSubscriberHandler:function(e){this.$set(this.subscribers[e],"missedMessages",0),this.$set(this.subscribersStatuses,e,"paused")},clearMessagesHandler:function(e){var t=this.subscribersMessages[e];t.splice(0,t.length)},unsubscribeMessageHandler:function(e,t){var s=this;return d()(p.a.mark((function i(){return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s.unsubscribe(e,t);case 2:case"end":return i.stop()}}),i)})))()},unsubscribe:function(e,t){var s=this;return d()(p.a.mark((function i(){var r,n;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=s.clients[e],n=s.clearObject(r.subscribers[t]),i.prev=1,r.subscribersConnectivityStatuses[t]||s.$set(r.subscribersConnectivityStatuses,t,!0),s.$set(r.subscribersStatuses,t,!1),s.$set(r.messages,t,1===n.mode?{}:[]),s.$set(r.subscribersMessagesBuffer,t,[]),i.next=8,r.client.unsubscribe(n.topic,{properties:n.unsubscribeProperties});case 8:r.logs.push({type:"unsubscribe",data:s.clearObject(n),timestamp:Date.now()}),s.$set(r.subscribersConnectivityStatuses,t,!1),i.next=15;break;case 12:i.prev=12,i.t0=i["catch"](1),r.status?s.errorHandler(e,i.t0,!0):s.errorHandler(e,new Error("Client disconnected"),!0);case 15:case"end":return i.stop()}}),i,null,[[1,12]])})))()},sendFromSubscriberHandler:function(e){var t=this;this.republishMessage=k()(e),this.$nextTick((function(){t.$refs.publisherModal.show()}))},clearLogs:function(){var e=this.activeClient.logs;e.splice(0,e.length)},showEntity:function(e){if(this.$set(this.entities[e],"rendered",!0),this.$refs.wrapper){var t=this.$refs.wrapper,s=this.$refs.entities[0]?this.$refs.entities[0].$el.offsetWidth:t.offsetWidth/3,i=s*(e-1),r=Math.abs(t.scrollLeft-i)/s*50;z.start({from:t.scrollLeft,to:i,duration:r,apply:function(e){t.scrollLeft=e}}),this.saveClients()}},hideEntity:function(e){this.$set(this.entities[e],"rendered",!1),this.saveClients()},clearUnresolvedMessages:function(){var e=this.activeClient.notResolvedMessages;e.splice(0,e.length)},swipeHandler:function(e){var t=this.$refs.wrapper,s=t&&t.offsetWidth,i=e.direction;t&&"left"===i?z.start({from:t.scrollLeft,to:t.scrollLeft+s,duration:200,apply:function(e){t.scrollLeft=e}}):t&&"right"===i&&z.start({from:t.scrollLeft,to:t.scrollLeft-s,duration:200,apply:function(e){t.scrollLeft=e}})},flespiLoginHandler:function(){var e=this,t=function t(s){if("string"===typeof s.data&&~s.data.indexOf("FlespiLogin|token:")){var i=s.data;i=i.replace("FlespiLogin|token:",""),i=JSON.parse(i),e.currentSettings.username=i.token,e.currentSettings.host="wss://".concat(i.region["mqtt-ws"]),window.removeEventListener("message",t)}};window.addEventListener("message",t),this.openWindow("https://flespi.io/login/#/providers")},openWindow:function(e,t){t=t||"auth";var s=500,i=600,r=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=o/2-s/2+r,c=a/2-i/2+n,p=window.open(e,t,"toolbar=no,location=no,status=yes,resizable=yes,scrollbars=yes, width="+s+", height="+i+", top="+c+", left="+l);window.focus&&p.focus()},getCid:function(e){return U()(JSON.parse(U()(e,"properties.userProperties.token","{}")),"cid",null)}},watch:{subscribersStatuses:function(e){this.saveClients()}},created:function(){var e=this;if(this.needInitNewClient&&!this.configuredClients.length&&(this.currentSettings=k()(_()({},ot,this.initSettings)),this.createClient(),this.setActiveClient(0)),this.configuredClients.length)this.initExternalClients(this.configuredClients);else if(this.useLocalStorage){var t=E["a"].getItem(yt);this.initExternalClients(t)}this.isInited=!0,window&&window.addEventListener("beforeunload",(function(){for(var t in e.clients){var s=e.clients[t];s.status&&(s.processTimer&&clearInterval(s.processTimer),e.destroyClient(s.client))}}))},destroyed:function(){for(var e in this.clients){var t=this.clients[e];t.status&&(t.processTimer&&clearInterval(t.processTimer),this.destroyClient(t.client))}},components:{FlespiTopic:J,Subscriber:_e,Publisher:Ue,Unresolved:Ne,Logs:Fe,PublisherModal:Qe,EntitiesMenu:et},updated:function(){if(this.isNeedScroll){var e=this.$refs.wrapper;z.start({from:e.scrollLeft,to:e.scrollWidth,duration:300,apply:function(t){e.scrollLeft=t}}),this.isNeedScroll=!1}},mixins:[nt]},_t=Ct,wt=(s("dec3"),Object(V["a"])(_t,n,o,!1,null,null,null)),kt=wt.exports,Pt={name:"PageIndex",data:function(){return{initSettings:void 0,needUseLS:void 0,needInitNewClient:void 0}},created:function(){var e=this.$route.params.mode,t=this.$route.params.token,s=this.$q.sessionStorage.getItem("mqtt-board-session-settings");s&&(e=s.mode,t=s.token),"onetime"===e&&(this.initSettings=k()(_()({},ot,{username:t})),this.needUseLS=!1,this.needInitNewClient=!0,!s&&this.$router.push("/"),this.$q.sessionStorage.set("mqtt-board-session-settings",{mode:e,token:t}))},components:{MqttClient:kt}},$t=Pt,Mt=Object(V["a"])($t,i,r,!1,null,null,null);t["default"]=Mt.exports},9224:function(e){e.exports=JSON.parse('{"a":"2.1.4"}')},ab66:function(e,t,s){"use strict";var i=s("5e04"),r=s.n(i);r.a},ae0d:function(e,t,s){},c276:function(e,t,s){},d159:function(e,t,s){},d619:function(e,t,s){},db71:function(e,t,s){"use strict";var i=s("82c0"),r=s.n(i);r.a},dec3:function(e,t,s){"use strict";var i=s("ae0d"),r=s.n(i);r.a},fbcf:function(e,t,s){"use strict";var i=s("d619"),r=s.n(i);r.a}}]);